{"id":"GoPit-07u","title":"Add XP bar to HUD","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:14.961863-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:48.445229-06:00","closed_at":"2026-01-04T23:58:48.445229-06:00","close_reason":"Closed"}
{"id":"GoPit-0it","title":"Complete Audio Pass","description":"# Complete Audio Pass\n\n## Parent Epic\nGoPit-aoo (Phase 5 - Polish \u0026 Release)\n\n## Overview\nAdd comprehensive audio coverage including biome music, complete SFX, and audio polish.\n\n## Requirements\n1. Unique music track per biome\n2. Boss fight music\n3. SFX for all ball types\n4. SFX for all status effects\n5. UI feedback sounds\n6. Victory/defeat fanfares\n\n## Audio Inventory Needed\n**Music:**\n- The Pit (mysterious, underground)\n- Frozen Depths (icy, ethereal)\n- Burning Sands (intense, percussive)\n- Final Descent (epic, dramatic)\n- Boss fight (intense, looping)\n- Victory fanfare\n- Game over sting\n\n**SFX Gaps:**\n- Ball type sounds (fire whoosh, ice crack, etc)\n- Status effect ticks\n- Boss attack telegraphs\n- Phase transition\n- Fusion reactor pickup\n- Level complete\n\n## Files to Create/Modify\n- NEW: assets/audio/music/*.ogg\n- NEW: assets/audio/sfx/*.wav\n- MODIFY: scripts/autoload/sound_manager.gd\n- MODIFY: scripts/autoload/music_manager.gd\n\n## Acceptance Criteria\n- [ ] Each biome has unique music\n- [ ] Boss fights have intense music\n- [ ] All ball types have distinct sounds\n- [ ] Status effects have audio feedback\n- [ ] Complete UI sound coverage\n- [ ] Audio levels balanced","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-05T23:42:46.743197-06:00","created_by":"randroid","updated_at":"2026-01-05T23:42:46.743197-06:00"}
{"id":"GoPit-0rg","title":"Add wave transition announcement","description":"## Problem\nWave counter silently increments. Players don't notice progression or feel accomplishment.\n\n## Implementation Plan\n\n### Wave Announcement UI\n**File: `scripts/ui/wave_announcement.gd`** (new)\n\n```gdscript\nextends CanvasLayer\n\n@onready var wave_label: Label = $WaveLabel\n\nfunc _ready():\n    visible = false\n    GameManager.wave_changed.connect(_on_wave_changed)\n\nfunc _on_wave_changed(new_wave: int):\n    _show_announcement(new_wave)\n\nfunc _show_announcement(wave: int):\n    wave_label.text = \"WAVE %d\" % wave\n    visible = true\n    wave_label.modulate.a = 0\n    wave_label.scale = Vector2(0.5, 0.5)\n    \n    var tween = create_tween()\n    # Fade in and scale up\n    tween.tween_property(wave_label, \"modulate:a\", 1.0, 0.2)\n    tween.parallel().tween_property(wave_label, \"scale\", Vector2(1.2, 1.2), 0.2)\n    # Hold\n    tween.tween_interval(0.8)\n    # Fade out and scale down\n    tween.tween_property(wave_label, \"modulate:a\", 0.0, 0.3)\n    tween.parallel().tween_property(wave_label, \"scale\", Vector2(0.8, 0.8), 0.3)\n    tween.tween_callback(func(): visible = false)\n```\n\n### Scene Structure\n**File: `scenes/ui/wave_announcement.tscn`**\n\n```\nWaveAnnouncement (CanvasLayer)\n‚îî‚îÄ‚îÄ CenterContainer (anchors: full rect)\n    ‚îî‚îÄ‚îÄ WaveLabel (Label)\n        - font_size: 72\n        - font: bold\n        - outline_size: 4\n        - outline_color: black\n        - horizontal_alignment: CENTER\n```\n\n### Add Wave Sound\n**Modify: `scripts/autoload/sound_manager.gd`**\n\nAdd new sound type:\n```gdscript\nenum SoundType { ..., WAVE_COMPLETE }\n\nfunc _generate_wave_complete() -\u003e AudioStreamWAV:\n    # Rising arpeggio: C-E-G-C (major chord)\n    # Duration: 0.4s\n    # Celebratory feel\n```\n\n### Wire Up Signal\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\nsignal wave_changed(new_wave: int)\n\nfunc advance_wave() -\u003e void:\n    current_wave += 1\n    wave_changed.emit(current_wave)\n```\n\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _advance_wave() -\u003e void:\n    enemies_killed_this_wave = 0\n    GameManager.advance_wave()\n    SoundManager.play(SoundManager.SoundType.WAVE_COMPLETE)\n```\n\n### Optional: Brief Slowmo\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _advance_wave() -\u003e void:\n    # Brief slowmo effect\n    Engine.time_scale = 0.3\n    await get_tree().create_timer(0.3 * 0.3).timeout  # Account for time scale\n    Engine.time_scale = 1.0\n    \n    # Continue with wave advance...\n```\n\n### Files to Create/Modify\n1. NEW: `scenes/ui/wave_announcement.tscn`\n2. NEW: `scripts/ui/wave_announcement.gd`\n3. MODIFY: `scenes/game.tscn` - instance wave_announcement\n4. MODIFY: `scripts/autoload/game_manager.gd` - add wave_changed signal\n5. MODIFY: `scripts/autoload/sound_manager.gd` - add WAVE_COMPLETE sound\n6. MODIFY: `scripts/game/game_controller.gd` - play sound, optional slowmo","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T01:48:08.54811-06:00","created_by":"randroid","updated_at":"2026-01-05T02:40:42.784877-06:00","closed_at":"2026-01-05T02:40:42.784877-06:00","close_reason":"Added wave transition with animated text and celebratory sound effect"}
{"id":"GoPit-0x8","title":"Add procedural background music","description":"## Problem\nGame is silent except for SFX. Feels empty and less engaging.\n\n## Implementation Plan\n\n### Approach: Extend SoundManager with procedural music generation\n\n**Modify: `scripts/autoload/sound_manager.gd`**\n\n```gdscript\n# Add music generation alongside existing SFX\n\nvar music_player: AudioStreamPlayer\nvar current_tempo: float = 120.0  # BPM\nvar current_wave: int = 1\nvar beat_timer: float = 0.0\n\n# Pentatonic scale for pleasant procedural music\nconst SCALE = [0, 2, 4, 7, 9, 12, 14, 16]  # C pentatonic\nconst BASE_FREQ = 130.81  # C3\n\nfunc _ready():\n    # ... existing code ...\n    _setup_music_player()\n    \nfunc _setup_music_player():\n    music_player = AudioStreamPlayer.new()\n    music_player.bus = \"Music\"\n    add_child(music_player)\n\nfunc _process(delta):\n    if GameManager.current_state == GameManager.GameState.PLAYING:\n        _update_music(delta)\n\nfunc _update_music(delta):\n    beat_timer += delta\n    var beat_duration = 60.0 / current_tempo\n    \n    if beat_timer \u003e= beat_duration:\n        beat_timer -= beat_duration\n        _play_beat()\n\nfunc _play_beat():\n    # Generate bass note on beat 1, 3\n    # Generate melody note with probability\n    # Intensity increases with wave\n    pass\n\nfunc set_wave_intensity(wave: int):\n    current_wave = wave\n    current_tempo = 100 + wave * 5  # Faster tempo each wave\n```\n\n### Audio Bus Setup\nAdd to project settings:\n- Master bus\n- SFX bus (child of Master)\n- Music bus (child of Master)\n\n### Wave-based Intensity\n- Wave 1-2: Calm ambient (slow tempo, sparse notes)\n- Wave 3-5: Building (medium tempo, bass + melody)\n- Wave 6+: Intense (fast tempo, full arrangement)\n\n### Files to Modify\n1. MODIFY: `scripts/autoload/sound_manager.gd` - add music generation\n2. MODIFY: `project.godot` - add audio buses\n3. MODIFY: `scripts/game/game_controller.gd` - call set_wave_intensity()\n\n### Alternative: Pre-made loops\nIf procedural is too complex, use layered audio loops that fade in/out based on wave intensity.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T02:02:57.247416-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.519746-06:00","closed_at":"2026-01-05T10:31:02.519746-06:00","close_reason":"Closed"}
{"id":"GoPit-1bl","title":"Create level_up.tscn (3 hardcoded upgrade cards)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:15.232129-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.992237-06:00","closed_at":"2026-01-05T00:01:32.992237-06:00","close_reason":"Closed"}
{"id":"GoPit-1db","title":"Set up collision layers (walls, balls, enemies, gems, player_zone)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:10.864904-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.016378-06:00","closed_at":"2026-01-04T23:53:52.016378-06:00","close_reason":"Closed"}
{"id":"GoPit-1lq","title":"Implement upgrade effects (damage+, fire rate+, HP+)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:15.509097-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.994022-06:00","closed_at":"2026-01-05T00:01:32.994022-06:00","close_reason":"Closed"}
{"id":"GoPit-1o7","title":"Create enemy_base.gd (HP, speed, take_damage, death signal)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:45.389758-06:00","created_by":"randroid","updated_at":"2026-01-04T23:51:41.177637-06:00","closed_at":"2026-01-04T23:51:41.177637-06:00","close_reason":"Closed"}
{"id":"GoPit-267","title":"Add meta-progression system (Pit Coins)","description":"## Problem\nNo meta-progression system exists. Each run starts fresh with no permanent upgrades, unlocks, or currency. Players have no reason to replay after initial curiosity wears off. This is the #1 retention killer.\n\n## Implementation Plan\n\n### Phase 1: Currency System\n**File: `scripts/autoload/meta_manager.gd`** (new autoload)\n\n```gdscript\nextends Node\n# Persisted data\nvar pit_coins: int = 0\nvar total_runs: int = 0\nvar unlocked_upgrades: Array[String] = []\n\nfunc _ready():\n    load_data()\n\nfunc earn_coins(wave: int, level: int) -\u003e int:\n    var earned = wave * 10 + level * 25\n    pit_coins += earned\n    save_data()\n    return earned\n\nfunc spend_coins(amount: int) -\u003e bool:\n    if pit_coins \u003e= amount:\n        pit_coins -= amount\n        save_data()\n        return true\n    return false\n\nfunc save_data():\n    var data = {\"coins\": pit_coins, \"runs\": total_runs, \"unlocks\": unlocked_upgrades}\n    var file = FileAccess.open(\"user://meta.save\", FileAccess.WRITE)\n    file.store_string(JSON.stringify(data))\n\nfunc load_data():\n    if FileAccess.file_exists(\"user://meta.save\"):\n        var file = FileAccess.open(\"user://meta.save\", FileAccess.READ)\n        var data = JSON.parse_string(file.get_as_text())\n        pit_coins = data.get(\"coins\", 0)\n        total_runs = data.get(\"runs\", 0)\n        unlocked_upgrades = data.get(\"unlocks\", [])\n```\n\n### Phase 2: Permanent Upgrades\n**File: `scripts/data/permanent_upgrades.gd`**\n\nDefine permanent upgrades purchasable with Pit Coins:\n- Starting HP +10 (cost: 100, 200, 400, 800...)\n- Starting Damage +2 (cost: 150, 300, 600...)\n- Starting Fire Rate -0.05s (cost: 200, 400, 800...)\n- Unlock ball types (cost: 500 each)\n\n### Phase 3: UI Integration\n**File: `scenes/ui/meta_shop.tscn`** (new scene)\n\n- Main menu with \"SHOP\" button\n- Grid of upgrade cards showing:\n  - Upgrade name and current level\n  - Cost for next level\n  - Buy button (disabled if insufficient coins)\n- Coin balance display in corner\n\n### Phase 4: Game Over Integration\n**Modify: `scripts/ui/game_over_overlay.gd`**\n\n- Show coins earned this run\n- Show total coin balance\n- Add \"SHOP\" button to go to upgrade menu\n\n### Files to Create/Modify\n1. NEW: `scripts/autoload/meta_manager.gd`\n2. NEW: `scripts/data/permanent_upgrades.gd`\n3. NEW: `scenes/ui/meta_shop.tscn`\n4. NEW: `scripts/ui/meta_shop.gd`\n5. MODIFY: `scripts/ui/game_over_overlay.gd`\n6. MODIFY: `project.godot` (add MetaManager autoload)\n7. NEW: `scenes/main_menu.tscn` (optional - for shop access)\n\n### Testing\n- Verify coins save/load correctly\n- Verify upgrades apply on game start\n- Verify coins accumulate across runs\n- Test purchase flow and insufficient funds","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-05T02:02:56.728446-06:00","created_by":"randroid","updated_at":"2026-01-05T02:02:56.728446-06:00","dependencies":[{"issue_id":"GoPit-267","depends_on_id":"GoPit-zb6","type":"blocks","created_at":"2026-01-05T02:15:50.797843-06:00","created_by":"randroid"}]}
{"id":"GoPit-28w","title":"Expand upgrade variety to 8+ types","description":"## Problem\nOnly 3 upgrade types exist. All shown every level-up. No interesting choices or build diversity.\n\n## Implementation Plan\n\n### Phase 1: Expand Upgrade Data\n**Modify: `scripts/ui/level_up_overlay.gd`**\n\n```gdscript\nenum UpgradeType {\n    DAMAGE,\n    FIRE_RATE,\n    MAX_HP,\n    MULTI_SHOT,\n    BALL_SPEED,\n    PIERCING,\n    RICOCHET,\n    CRITICAL,\n    MAGNETISM,\n    HEAL\n}\n\nconst UPGRADE_DATA := {\n    UpgradeType.DAMAGE: {\n        \"name\": \"Power Up\",\n        \"description\": \"+5 Ball Damage\",\n        \"icon\": \"‚öîÔ∏è\",\n        \"apply\": \"_apply_damage_upgrade\",\n        \"max_stacks\": 10\n    },\n    UpgradeType.FIRE_RATE: {\n        \"name\": \"Quick Fire\",\n        \"description\": \"-0.1s Cooldown\",\n        \"icon\": \"‚ö°\",\n        \"apply\": \"_apply_fire_rate_upgrade\",\n        \"max_stacks\": 4  # Min cooldown 0.1s\n    },\n    UpgradeType.MAX_HP: {\n        \"name\": \"Vitality\",\n        \"description\": \"+25 Max HP\",\n        \"icon\": \"‚ù§Ô∏è\",\n        \"apply\": \"_apply_hp_upgrade\",\n        \"max_stacks\": 10\n    },\n    UpgradeType.MULTI_SHOT: {\n        \"name\": \"Multi Shot\",\n        \"description\": \"Fire 2 balls (spread)\",\n        \"icon\": \"üî±\",\n        \"apply\": \"_apply_multi_shot\",\n        \"max_stacks\": 3  # Up to 4 balls\n    },\n    UpgradeType.BALL_SPEED: {\n        \"name\": \"Velocity\",\n        \"description\": \"+100 Ball Speed\",\n        \"icon\": \"üí®\",\n        \"apply\": \"_apply_speed_upgrade\",\n        \"max_stacks\": 5\n    },\n    UpgradeType.PIERCING: {\n        \"name\": \"Piercing\",\n        \"description\": \"Ball pierces 1 enemy\",\n        \"icon\": \"üéØ\",\n        \"apply\": \"_apply_piercing\",\n        \"max_stacks\": 3\n    },\n    UpgradeType.RICOCHET: {\n        \"name\": \"Ricochet\",\n        \"description\": \"+2 wall bounces\",\n        \"icon\": \"‚Ü©Ô∏è\",\n        \"apply\": \"_apply_ricochet\",\n        \"max_stacks\": 5\n    },\n    UpgradeType.CRITICAL: {\n        \"name\": \"Critical Hit\",\n        \"description\": \"10% chance 2x damage\",\n        \"icon\": \"üí•\",\n        \"apply\": \"_apply_critical\",\n        \"max_stacks\": 5  # Up to 50%\n    },\n    UpgradeType.MAGNETISM: {\n        \"name\": \"Magnetism\",\n        \"description\": \"Gems attracted to you\",\n        \"icon\": \"üß≤\",\n        \"apply\": \"_apply_magnetism\",\n        \"max_stacks\": 3\n    },\n    UpgradeType.HEAL: {\n        \"name\": \"Heal\",\n        \"description\": \"Restore 30 HP\",\n        \"icon\": \"üíö\",\n        \"apply\": \"_apply_heal\",\n        \"max_stacks\": 99  # Always available\n    }\n}\n\nvar upgrade_stacks: Dictionary = {}  # Track how many times each upgrade taken\n\nfunc _randomize_upgrades() -\u003e void:\n    _available_upgrades.clear()\n    var pool: Array[UpgradeType] = []\n    \n    # Add upgrades that haven't hit max stacks\n    for upgrade_type in UPGRADE_DATA:\n        var data = UPGRADE_DATA[upgrade_type]\n        var current_stacks = upgrade_stacks.get(upgrade_type, 0)\n        if current_stacks \u003c data.get(\"max_stacks\", 99):\n            pool.append(upgrade_type)\n    \n    pool.shuffle()\n    _available_upgrades = pool.slice(0, 3)\n```\n\n### Phase 2: New Upgrade Implementations\n**Modify: `scripts/entities/ball_spawner.gd`**\n\n```gdscript\nvar ball_count: int = 1\nvar ball_spread: float = 0.0\n\nfunc fire() -\u003e void:\n    for i in range(ball_count):\n        var spread_offset = (i - (ball_count - 1) / 2.0) * ball_spread\n        var dir = aim_direction.rotated(spread_offset)\n        _spawn_ball(dir)\n\nfunc add_multi_shot():\n    ball_count += 1\n    ball_spread = 0.15  # radians between balls\n```\n\n**Modify: `scripts/entities/ball.gd`**\n\n```gdscript\nvar pierce_count: int = 0\nvar max_bounces: int = 10  # Default wall bounces\nvar crit_chance: float = 0.0\n\nfunc _on_hit_enemy(enemy):\n    var actual_damage = damage\n    if randf() \u003c crit_chance:\n        actual_damage *= 2\n        # Visual crit indicator\n    \n    enemy.take_damage(actual_damage)\n    \n    if pierce_count \u003e 0:\n        pierce_count -= 1\n        # Don't bounce, continue through\n    else:\n        direction = direction.bounce(collision_normal)\n```\n\n### Phase 3: Magnetism System\n**Modify: `scripts/entities/gem.gd`**\n\n```gdscript\nvar magnetism_range: float = 0.0  # Set by GameManager\nvar magnetism_speed: float = 500.0\n\nfunc _physics_process(delta):\n    if magnetism_range \u003e 0:\n        var player_zone_y = 1200  # Player zone Y position\n        var distance_to_zone = player_zone_y - global_position.y\n        \n        if distance_to_zone \u003c magnetism_range:\n            # Accelerate toward player zone\n            var pull_strength = 1.0 - (distance_to_zone / magnetism_range)\n            fall_speed = lerp(fall_speed, magnetism_speed, pull_strength * delta * 5)\n```\n\n### Files to Modify\n1. MODIFY: `scripts/ui/level_up_overlay.gd` - expand upgrade data\n2. MODIFY: `scripts/entities/ball_spawner.gd` - multi-shot support\n3. MODIFY: `scripts/entities/ball.gd` - pierce, crit, bounce tracking\n4. MODIFY: `scripts/entities/gem.gd` - magnetism attraction\n5. MODIFY: `scripts/autoload/game_manager.gd` - store upgrade stats\n\n### Testing\n- Verify 3 random upgrades shown each level-up\n- Verify max stack limits work\n- Verify each upgrade applies correctly\n- Test upgrade synergies (multi-shot + piercing)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T01:48:09.081238-06:00","created_by":"randroid","updated_at":"2026-01-05T02:44:25.642106-06:00","closed_at":"2026-01-05T02:44:25.642106-06:00","close_reason":"Expanded to 10 upgrade types with multi-shot, piercing, ricochet, crit, magnetism, heal, and stack tracking"}
{"id":"GoPit-29a","title":"Mobile Optimization \u0026 Testing","description":"# Mobile Optimization \u0026 Testing\n\n## Parent Epic\nGoPit-aoo (Phase 5 - Polish \u0026 Release)\n\n## Overview\nOptimize for mobile performance, test on devices, and prepare exports.\n\n## Requirements\n1. Maintain 60fps on mid-range devices\n2. Memory management for long sessions\n3. Touch controls feel responsive\n4. Battery usage reasonable\n5. iOS and Android exports working\n6. Web export functional\n\n## Performance Targets\n- 60fps stable gameplay\n- \u003c 200MB memory usage\n- \u003c 5% CPU idle\n- Responsive touch (\u003c 16ms latency)\n\n## Optimization Areas\n**Rendering:**\n- Batch draw calls where possible\n- Limit active particle systems\n- Use object pooling for balls/gems\n- Reduce overdraw\n\n**Memory:**\n- Pool frequently created objects\n- Clear unused resources between stages\n- Monitor for memory leaks\n\n**Touch:**\n- Profile input latency\n- Ensure hit targets are adequate\n- Test with various screen sizes\n\n## Testing Matrix\n| Platform | Devices |\n|----------|---------|\n| iOS | iPhone 12, iPad |\n| Android | Pixel 6, budget device |\n| Web | Chrome, Safari, Firefox |\n\n## Files to Modify\n- MODIFY: Various scripts for pooling\n- MODIFY: export_presets.cfg\n- MODIFY: project.godot (renderer settings)\n\n## Acceptance Criteria\n- [ ] 60fps on target devices\n- [ ] Memory stable during long sessions\n- [ ] Touch controls responsive\n- [ ] iOS export works\n- [ ] Android export works\n- [ ] Web export works\n- [ ] All PlayGodot tests pass","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-05T23:42:47.222251-06:00","created_by":"randroid","updated_at":"2026-01-05T23:42:47.222251-06:00"}
{"id":"GoPit-2h5","title":"Lock portrait aspect ratio with pillarboxing","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T22:47:48.257355-06:00","created_by":"randroid","updated_at":"2026-01-05T22:52:12.035676-06:00","closed_at":"2026-01-05T22:52:12.035676-06:00","close_reason":"Changed stretch aspect to 'keep' for pillarboxing on widescreen"}
{"id":"GoPit-2si","title":"Add enemy approach warning","description":"## Problem\nPlayers are caught off-guard when enemies deal damage. No warning when enemies approach.\n\n## Implementation Plan\n\n### Approach: Warning zone detection + visual/audio cues\n\n### Phase 1: Warning Zone Detection\n**Modify: `scripts/entities/enemies/enemy_base.gd`**\n\n```gdscript\nsignal approaching_danger_zone\nsignal left_danger_zone\n\nconst DANGER_ZONE_Y: float = 1000.0  # 200px above player zone at 1200\n\nvar in_danger_zone: bool = false\n\nfunc _physics_process(delta):\n    # Existing movement...\n    \n    # Check danger zone\n    var now_in_danger = global_position.y \u003e= DANGER_ZONE_Y\n    if now_in_danger and not in_danger_zone:\n        in_danger_zone = true\n        approaching_danger_zone.emit()\n    elif not now_in_danger and in_danger_zone:\n        in_danger_zone = false\n        left_danger_zone.emit()\n```\n\n### Phase 2: Screen Edge Warning\n**File: `scripts/effects/danger_indicator.gd`** (new)\n\n```gdscript\nextends Control\n## Shows pulsing red indicator at bottom of screen when enemies are near\n\nvar danger_count: int = 0\nvar pulse_tween: Tween\n\n@onready var indicator: ColorRect = $Indicator\n\nfunc _ready():\n    indicator.color = Color(1, 0, 0, 0)\n    \nfunc add_danger():\n    danger_count += 1\n    if danger_count == 1:\n        _start_pulsing()\n\nfunc remove_danger():\n    danger_count = max(0, danger_count - 1)\n    if danger_count == 0:\n        _stop_pulsing()\n\nfunc _start_pulsing():\n    if pulse_tween:\n        pulse_tween.kill()\n    pulse_tween = create_tween().set_loops()\n    pulse_tween.tween_property(indicator, \"color:a\", 0.5, 0.3)\n    pulse_tween.tween_property(indicator, \"color:a\", 0.2, 0.3)\n\nfunc _stop_pulsing():\n    if pulse_tween:\n        pulse_tween.kill()\n    var fade = create_tween()\n    fade.tween_property(indicator, \"color:a\", 0.0, 0.2)\n```\n\n### Scene Structure\n**File: `scenes/ui/danger_indicator.tscn`**\n\n```\nDangerIndicator (Control) [anchors: bottom, full width]\n‚îî‚îÄ‚îÄ Indicator (ColorRect)\n    - size: full width x 20px\n    - color: red with 0 alpha\n    - position: bottom of screen\n```\n\n### Phase 3: Enemy Visual Change\n**Modify: `scripts/entities/enemies/enemy_base.gd`**\n\n```gdscript\nfunc _on_enter_danger_zone():\n    # Tint enemy red\n    modulate = Color(1.5, 0.5, 0.5)\n    \n    # Optional: speed up slightly\n    speed *= 1.1\n\nfunc _on_exit_danger_zone():\n    modulate = Color.WHITE\n```\n\n### Phase 4: Audio Warning\n**Modify: `scripts/autoload/sound_manager.gd`**\n\nAdd low-frequency pulse sound for danger:\n```gdscript\nenum SoundType { ..., DANGER_PULSE }\n\nvar danger_pulse_timer: float = 0.0\n\nfunc _process(delta):\n    if danger_count \u003e 0:\n        danger_pulse_timer += delta\n        if danger_pulse_timer \u003e= 0.5:  # Pulse every 0.5s\n            danger_pulse_timer = 0\n            play(SoundType.DANGER_PULSE)\n```\n\n### Wire Up in Game Controller\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\n@onready var danger_indicator: Control = $UI/DangerIndicator\n\nfunc _on_enemy_spawned(enemy: EnemyBase) -\u003e void:\n    enemy.died.connect(_on_enemy_died)\n    enemy.approaching_danger_zone.connect(func(): danger_indicator.add_danger())\n    enemy.left_danger_zone.connect(func(): danger_indicator.remove_danger())\n```\n\n### Files to Create/Modify\n1. NEW: `scenes/ui/danger_indicator.tscn`\n2. NEW: `scripts/effects/danger_indicator.gd`\n3. MODIFY: `scenes/game.tscn` - add danger indicator\n4. MODIFY: `scripts/entities/enemies/enemy_base.gd` - danger zone signals, visual\n5. MODIFY: `scripts/game/game_controller.gd` - wire danger signals\n6. MODIFY: `scripts/autoload/sound_manager.gd` - add DANGER_PULSE sound","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T01:48:08.8142-06:00","created_by":"randroid","updated_at":"2026-01-05T02:42:07.450985-06:00","closed_at":"2026-01-05T02:42:07.450985-06:00","close_reason":"Added danger zone detection with pulsing red indicator and enemy tint when approaching player"}
{"id":"GoPit-33z","title":"Add detailed stats to game over screen","description":"## Problem\nGame over shows only level and wave. Missing interesting stats.\n\n## Implementation Plan\n\n### Phase 1: Track Stats in GameManager\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\n# Session stats (reset each run)\nvar stats := {\n    \"enemies_killed\": 0,\n    \"balls_fired\": 0,\n    \"damage_dealt\": 0,\n    \"gems_collected\": 0,\n    \"time_survived\": 0.0,\n    \"highest_combo\": 0,\n    \"current_combo\": 0,\n    \"combo_timer\": 0.0\n}\n\nfunc _process(delta):\n    if current_state == GameState.PLAYING:\n        stats.time_survived += delta\n        \n        # Combo timeout\n        if stats.combo_timer \u003e 0:\n            stats.combo_timer -= delta\n            if stats.combo_timer \u003c= 0:\n                stats.current_combo = 0\n\nfunc record_enemy_kill():\n    stats.enemies_killed += 1\n    stats.current_combo += 1\n    stats.combo_timer = 2.0  # 2 second combo window\n    stats.highest_combo = max(stats.highest_combo, stats.current_combo)\n\nfunc record_ball_fired():\n    stats.balls_fired += 1\n\nfunc record_damage_dealt(amount: int):\n    stats.damage_dealt += amount\n\nfunc record_gem_collected():\n    stats.gems_collected += 1\n\nfunc _reset_stats():\n    # Reset session stats\n    for key in stats:\n        if typeof(stats[key]) == TYPE_INT:\n            stats[key] = 0\n        else:\n            stats[key] = 0.0\n```\n\n### Phase 2: Update Game Over UI\n**Modify: `scenes/ui/game_over_overlay.tscn`**\n\n```\nGameOverOverlay\n‚îî‚îÄ‚îÄ Panel\n    ‚îî‚îÄ‚îÄ VBoxContainer\n        ‚îú‚îÄ‚îÄ GameOverLabel\n        ‚îú‚îÄ‚îÄ StatsContainer (GridContainer, 2 columns)\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Level:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ LevelValue\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Wave:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ WaveValue\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Enemies Killed:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ EnemiesValue\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Damage Dealt:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ DamageValue\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Time Survived:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ TimeValue\n        ‚îÇ   ‚îú‚îÄ‚îÄ Label (\"Best Combo:\")\n        ‚îÇ   ‚îú‚îÄ‚îÄ ComboValue\n        ‚îî‚îÄ‚îÄ RestartButton\n```\n\n**Modify: `scripts/ui/game_over_overlay.gd`**\n\n```gdscript\nfunc _on_game_over():\n    visible = true\n    \n    level_label.text = str(GameManager.player_level)\n    wave_label.text = str(GameManager.current_wave)\n    enemies_label.text = str(GameManager.stats.enemies_killed)\n    damage_label.text = str(GameManager.stats.damage_dealt)\n    combo_label.text = str(GameManager.stats.highest_combo)\n    \n    var time = GameManager.stats.time_survived\n    var minutes = int(time) / 60\n    var seconds = int(time) % 60\n    time_label.text = \"%d:%02d\" % [minutes, seconds]\n```\n\n### Phase 3: Wire Up Stat Recording\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _on_fire_pressed():\n    ball_spawner.fire()\n    GameManager.record_ball_fired()\n\nfunc _on_enemy_died(enemy):\n    GameManager.record_enemy_kill()\n    # existing code...\n```\n\n**Modify: `scripts/entities/enemies/enemy_base.gd`**\n\n```gdscript\nfunc take_damage(amount: int):\n    GameManager.record_damage_dealt(amount)\n    # existing code...\n```\n\n### Files to Modify\n1. MODIFY: `scripts/autoload/game_manager.gd` - add stats tracking\n2. MODIFY: `scenes/ui/game_over_overlay.tscn` - expand UI\n3. MODIFY: `scripts/ui/game_over_overlay.gd` - display all stats\n4. MODIFY: `scripts/game/game_controller.gd` - record events\n5. MODIFY: `scripts/entities/enemies/enemy_base.gd` - record damage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:12:31.978956-06:00","created_by":"randroid","updated_at":"2026-01-05T02:48:01.059993-06:00","closed_at":"2026-01-05T02:48:01.059993-06:00","close_reason":"Added enemies killed, damage dealt, gems collected, and time survived to game over screen"}
{"id":"GoPit-3ak","title":"Implement restart flow (reset state, reload scene)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:00.860779-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.24695-06:00","closed_at":"2026-01-04T23:58:36.24695-06:00","close_reason":"Closed"}
{"id":"GoPit-3e4","title":"Add ball limit for performance","description":"## Problem\nWith fire rate upgrades, many balls can exist simultaneously. Could cause performance issues.\n\n## Implementation Plan\n\n### Add Ball Limit to Spawner\n**Modify: `scripts/entities/ball_spawner.gd`**\n\n```gdscript\n@export var max_balls: int = 25\n\nfunc fire() -\u003e void:\n    if not balls_container:\n        return\n    \n    # Check ball limit\n    if balls_container.get_child_count() \u003e= max_balls:\n        # Despawn oldest ball\n        var oldest = balls_container.get_child(0)\n        oldest.despawn()\n    \n    # Spawn new ball(s)\n    for i in range(ball_count):\n        _spawn_ball(aim_direction)\n```\n\n### Alternative: Object Pooling\nFor better performance, reuse ball instances:\n\n```gdscript\nvar ball_pool: Array[CharacterBody2D] = []\n\nfunc _ready():\n    # Pre-create pool\n    for i in range(max_balls):\n        var ball = ball_scene.instantiate()\n        ball.visible = false\n        ball.set_process(false)\n        balls_container.add_child(ball)\n        ball_pool.append(ball)\n\nfunc _get_pooled_ball() -\u003e CharacterBody2D:\n    for ball in ball_pool:\n        if not ball.visible:\n            return ball\n    \n    # Pool exhausted - despawn oldest active\n    for ball in ball_pool:\n        if ball.visible:\n            ball.despawn()\n            return ball\n    \n    return null\n\nfunc fire():\n    var ball = _get_pooled_ball()\n    if ball:\n        ball.position = global_position + aim_direction * 30\n        ball.set_direction(aim_direction)\n        ball.visible = true\n        ball.set_process(true)\n```\n\n### Ball Despawn Cleanup\n**Modify: `scripts/entities/ball.gd`**\n\n```gdscript\nfunc despawn() -\u003e void:\n    despawned.emit()\n    \n    # For pooling: reset state instead of queue_free\n    if is_pooled:\n        visible = false\n        set_process(false)\n        velocity = Vector2.ZERO\n    else:\n        queue_free()\n```\n\n### Files to Modify\n1. MODIFY: `scripts/entities/ball_spawner.gd` - add ball limit\n2. MODIFY: `scripts/entities/ball.gd` - support pooling (optional)","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-05T02:13:41.289161-06:00","created_by":"randroid","updated_at":"2026-01-05T02:13:41.289161-06:00"}
{"id":"GoPit-3ky","title":"EPIC: Phase 1 - Core Alignment","description":"# Phase 1: Core Alignment with BallxPit\n\n## Overview\nAlign GoPit's core mechanics with Ball x Pit's fundamental gameplay loop. This phase addresses the most critical gaps between current implementation and target design.\n\n## Success Criteria\n- [ ] Player can move freely in the play area\n- [ ] Autofire can be toggled on/off\n- [ ] Enemies show warning before attacking\n- [ ] Gems require player to walk over them\n- [ ] Baby balls auto-generate and fire\n\n## Reference\n- [Ball x Pit Steam](https://store.steampowered.com/app/2062430/BALL_x_PIT/)\n- [GDD.md Section 3.1](./GDD.md#31-player-character)\n\n## Technical Context\nCurrent architecture:\n- game_controller.gd - Main game loop\n- ball_spawner.gd - Ball firing logic  \n- enemy_base.gd - Enemy behavior\n- gem.gd - Gem collection\n- Player zone is Area2D at bottom of screen\n\n## Child Tasks\n1. Player Free Movement\n2. Autofire Toggle\n3. Enemy Warning System\n4. Gem Collection Rework\n5. Baby Ball System\n\n## Priority\nP0 - Critical foundation for all other features","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-05T23:19:24.757556-06:00","created_by":"randroid","updated_at":"2026-01-05T23:19:24.757556-06:00","dependencies":[{"issue_id":"GoPit-3ky","depends_on_id":"GoPit-acg","type":"blocks","created_at":"2026-01-05T23:23:27.087573-06:00","created_by":"randroid"},{"issue_id":"GoPit-3ky","depends_on_id":"GoPit-qa8","type":"blocks","created_at":"2026-01-05T23:23:27.135058-06:00","created_by":"randroid"},{"issue_id":"GoPit-3ky","depends_on_id":"GoPit-q65","type":"blocks","created_at":"2026-01-05T23:23:27.182563-06:00","created_by":"randroid"},{"issue_id":"GoPit-3ky","depends_on_id":"GoPit-e7y","type":"blocks","created_at":"2026-01-05T23:23:27.229259-06:00","created_by":"randroid"},{"issue_id":"GoPit-3ky","depends_on_id":"GoPit-jiv","type":"blocks","created_at":"2026-01-05T23:23:27.276236-06:00","created_by":"randroid"}]}
{"id":"GoPit-4ap","title":"Add AimLine trajectory preview (Line2D)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:20.658283-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.020352-06:00","closed_at":"2026-01-04T23:53:52.020352-06:00","close_reason":"Closed"}
{"id":"GoPit-4le","title":"Epic 5: Player Damage \u0026 Game Over","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:14:01.523056-06:00","created_by":"randroid","updated_at":"2026-01-05T01:15:24.175613-06:00","closed_at":"2026-01-05T01:15:24.175613-06:00","close_reason":"All sub-tasks completed","dependencies":[{"issue_id":"GoPit-4le","depends_on_id":"GoPit-e50","type":"blocks","created_at":"2026-01-04T23:17:26.38931-06:00","created_by":"randroid"},{"issue_id":"GoPit-4le","depends_on_id":"GoPit-4qt","type":"blocks","created_at":"2026-01-04T23:17:26.451116-06:00","created_by":"randroid"},{"issue_id":"GoPit-4le","depends_on_id":"GoPit-8h3","type":"blocks","created_at":"2026-01-04T23:17:26.511862-06:00","created_by":"randroid"},{"issue_id":"GoPit-4le","depends_on_id":"GoPit-xb8","type":"blocks","created_at":"2026-01-04T23:17:26.573843-06:00","created_by":"randroid"},{"issue_id":"GoPit-4le","depends_on_id":"GoPit-3ak","type":"blocks","created_at":"2026-01-04T23:17:26.635526-06:00","created_by":"randroid"},{"issue_id":"GoPit-4le","depends_on_id":"GoPit-s0e","type":"blocks","created_at":"2026-01-04T23:17:45.347522-06:00","created_by":"randroid"}]}
{"id":"GoPit-4mj","title":"Verify full restart resets all state","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:16:29.484503-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.999004-06:00","closed_at":"2026-01-05T00:01:32.999004-06:00","close_reason":"Closed"}
{"id":"GoPit-4qt","title":"Detect enemy entering zone, call GameManager.take_damage()","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:00.075202-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.243542-06:00","closed_at":"2026-01-04T23:58:36.243542-06:00","close_reason":"Closed"}
{"id":"GoPit-5kj","title":"Add off-screen ball cleanup (despawn at top/bottom)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:32.199707-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.027094-06:00","closed_at":"2026-01-04T23:53:52.027094-06:00","close_reason":"Closed"}
{"id":"GoPit-5tv","title":"Visual Effects Polish","description":"# Visual Effects Polish\n\n## Parent Epic\nGoPit-aoo (Phase 5 - Polish \u0026 Release)\n\n## Overview\nAdd visual polish including particle effects, screen transitions, and juice.\n\n## Requirements\n1. Ball trails per type (fire trail, ice sparkle, etc)\n2. Status effect particles on enemies\n3. Boss attack telegraphs (ground markers, warnings)\n4. Screen transitions between biomes\n5. Victory/defeat animations\n6. UI animations (level up flourish, etc)\n\n## Visual Effects Needed\n**Ball Trails:**\n- Fire: orange ember trail\n- Ice: blue frost particles\n- Lightning: electric sparks\n- Poison: green drips\n- Evolved balls: enhanced trails\n\n**Enemy Effects:**\n- Burn: flames on body\n- Freeze: ice crystals\n- Poison: green bubbles\n- Bleed: blood drips\n\n**Boss Effects:**\n- Attack telegraph markers\n- Phase transition flash\n- Damage flash\n- Death explosion\n\n**UI Polish:**\n- Level up confetti\n- Combo counter pulse\n- XP bar fill animation\n- Card selection glow\n\n## Files to Create/Modify\n- NEW: scenes/effects/*.tscn (various)\n- MODIFY: scripts/entities/ball.gd (trails)\n- MODIFY: scripts/entities/enemies/enemy_base.gd\n- MODIFY: UI scripts for animations\n\n## Acceptance Criteria\n- [ ] All ball types have distinct trails\n- [ ] Status effects visible on enemies\n- [ ] Boss attacks clearly telegraphed\n- [ ] Smooth biome transitions\n- [ ] Satisfying victory animation\n- [ ] UI feels responsive and juicy","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-05T23:42:46.965408-06:00","created_by":"randroid","updated_at":"2026-01-05T23:42:46.965408-06:00"}
{"id":"GoPit-64u","title":"Add audio settings with volume controls","description":"## Problem\nPlayers cannot mute or adjust volume. Critical for mobile (public places, night time).\n\n## Implementation Plan\n\n### Phase 1: Settings Data\n**Modify: `scripts/autoload/sound_manager.gd`**\n\n```gdscript\nvar master_volume: float = 1.0\nvar sfx_volume: float = 1.0\nvar music_volume: float = 1.0\nvar is_muted: bool = false\n\nfunc set_master_volume(value: float):\n    master_volume = clamp(value, 0.0, 1.0)\n    AudioServer.set_bus_volume_db(0, linear_to_db(master_volume))\n    _save_settings()\n\nfunc set_sfx_volume(value: float):\n    sfx_volume = clamp(value, 0.0, 1.0)\n    var bus_idx = AudioServer.get_bus_index(\"SFX\")\n    AudioServer.set_bus_volume_db(bus_idx, linear_to_db(sfx_volume))\n    _save_settings()\n\nfunc toggle_mute():\n    is_muted = !is_muted\n    AudioServer.set_bus_mute(0, is_muted)\n    _save_settings()\n\nfunc _save_settings():\n    var data = {\n        \"master\": master_volume,\n        \"sfx\": sfx_volume,\n        \"music\": music_volume,\n        \"muted\": is_muted\n    }\n    var file = FileAccess.open(\"user://audio_settings.save\", FileAccess.WRITE)\n    file.store_string(JSON.stringify(data))\n\nfunc _load_settings():\n    if FileAccess.file_exists(\"user://audio_settings.save\"):\n        # Load and apply settings\n        pass\n```\n\n### Phase 2: Settings UI\n**File: `scenes/ui/settings_overlay.tscn`** (new)\n\n```\nSettingsOverlay (CanvasLayer)\n‚îî‚îÄ‚îÄ Panel\n    ‚îî‚îÄ‚îÄ VBoxContainer\n        ‚îú‚îÄ‚îÄ TitleLabel (\"Settings\")\n        ‚îú‚îÄ‚îÄ MasterVolumeSlider + Label\n        ‚îú‚îÄ‚îÄ SFXVolumeSlider + Label\n        ‚îú‚îÄ‚îÄ MusicVolumeSlider + Label\n        ‚îú‚îÄ‚îÄ MuteToggle (CheckButton)\n        ‚îî‚îÄ‚îÄ CloseButton\n```\n\n### Phase 3: Quick Mute Button on HUD\n**Modify: `scenes/game.tscn`**\n\nAdd small speaker icon in top-right corner that toggles mute on tap.\n\n### Files to Create/Modify\n1. MODIFY: `scripts/autoload/sound_manager.gd` - volume controls\n2. NEW: `scenes/ui/settings_overlay.tscn`\n3. NEW: `scripts/ui/settings_overlay.gd`\n4. MODIFY: `scenes/game.tscn` - add mute button to HUD\n5. MODIFY: `scripts/ui/hud.gd` - handle mute button\n\n### Audio Bus Setup (prerequisite)\nRequires audio buses: Master, SFX, Music","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-05T02:02:57.527844-06:00","created_by":"randroid","updated_at":"2026-01-05T02:02:57.527844-06:00","dependencies":[{"issue_id":"GoPit-64u","depends_on_id":"GoPit-0x8","type":"blocks","created_at":"2026-01-05T02:15:49.922158-06:00","created_by":"randroid"}]}
{"id":"GoPit-6he","title":"Create GameManager autoload with state machine","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:10.346933-06:00","created_by":"randroid","updated_at":"2026-01-04T23:36:51.594247-06:00","closed_at":"2026-01-04T23:36:51.594247-06:00","close_reason":"Closed"}
{"id":"GoPit-6p4","title":"EPIC: Phase 3 - Boss \u0026 Stages","description":"# Phase 3: Boss Fights \u0026 Biome System\n\n## Overview\nAdd boss encounters and multiple biomes/stages to create level-based progression with a win condition.\n\n## Success Criteria\n- [ ] Boss base class with phases, patterns, HP bars\n- [ ] At least 3 unique bosses implemented\n- [ ] 3+ biomes with unique visuals and hazards\n- [ ] Stage progression system (Pit ‚Üí Ice ‚Üí Desert ‚Üí etc)\n- [ ] Win condition: Beat final boss\n\n## Reference\n- [Ball x Pit Review](https://monstervine.com/2025/10/ball-x-pit-review/)\n- [GDD.md Section 3.4](./GDD.md#34-boss-system-new)\n\n## Technical Context\nCurrent state:\n- enemy_spawner.gd handles wave spawning\n- enemy_base.gd is base class for enemies\n- game_manager.gd tracks waves (endless)\n- No boss or biome system exists\n\n## Boss Design Pattern\nEach stage has:\n- Wave 10: Mini-boss (introduces mechanic)\n- Wave 20: Stage boss (harder patterns)\n- Wave 30: Final boss (multi-phase)\n\nBoss Base Class needs:\n- Large HP pool with visible HP bar\n- Phase transitions (change patterns at HP thresholds)\n- Telegraphed attacks (warning indicators)\n- Add spawns during fight\n- Invulnerability windows\n\n## Biome System\nEach biome needs:\n- Unique background/tileset\n- Stage-specific hazards\n- Enemy variants (e.g., Ice Slime)\n- Biome-specific music\n\n## Child Tasks\n1. Boss Base Class\n2. First Boss: Slime King\n3. Biome System Architecture\n4. First Biome: The Pit (default)\n5. Second Biome: Frozen Depths\n6. Stage Progression \u0026 Win Condition\n\n## Dependencies\nSoft dependency on Phase 2 (balls should have variety for boss fights)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-05T23:19:25.263102-06:00","created_by":"randroid","updated_at":"2026-01-05T23:19:25.263102-06:00","dependencies":[{"issue_id":"GoPit-6p4","depends_on_id":"GoPit-anr","type":"blocks","created_at":"2026-01-05T23:40:33.211383-06:00","created_by":"randroid"},{"issue_id":"GoPit-6p4","depends_on_id":"GoPit-87x","type":"blocks","created_at":"2026-01-05T23:40:33.259325-06:00","created_by":"randroid"},{"issue_id":"GoPit-6p4","depends_on_id":"GoPit-6wd","type":"blocks","created_at":"2026-01-05T23:40:33.306805-06:00","created_by":"randroid"},{"issue_id":"GoPit-6p4","depends_on_id":"GoPit-dlt","type":"blocks","created_at":"2026-01-05T23:40:33.353809-06:00","created_by":"randroid"},{"issue_id":"GoPit-6p4","depends_on_id":"GoPit-zxr","type":"blocks","created_at":"2026-01-05T23:40:33.495903-06:00","created_by":"randroid"}]}
{"id":"GoPit-6s6","title":"Create ball.tscn (CharacterBody2D, procedural circle)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:31.159482-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.022861-06:00","closed_at":"2026-01-04T23:53:52.022861-06:00","close_reason":"Closed"}
{"id":"GoPit-6wd","title":"Biome System Architecture","description":"# Biome System Architecture\n\n## Parent Epic\nGoPit-6p4 (Phase 3 - Boss \u0026 Stages)\n\n## Overview\nCreate the biome/stage system that allows different themed environments with unique visuals, hazards, and enemy variants.\n\n## Requirements\n1. Biome resource type defining theme properties\n2. Dynamic background/tileset swapping\n3. Biome-specific hazard system\n4. Enemy variant support per biome\n5. Stage progression logic (Pit ‚Üí Ice ‚Üí Desert ‚Üí etc)\n6. Wave-based boss triggers per stage\n\n## Biome Structure\n```gdscript\n# resources/biomes/biome.gd\nclass_name Biome\nextends Resource\n\n@export var biome_name: String\n@export var background_texture: Texture2D\n@export var wall_color: Color\n@export var ambient_color: Color\n@export var music_track: AudioStream\n\n@export var hazard_scenes: Array[PackedScene]\n@export var hazard_spawn_rate: float\n\n@export var enemy_variants: Dictionary  # base_type -\u003e variant_scene\n@export var boss_scene: PackedScene\n\n@export var waves_in_stage: int = 30\n@export var boss_wave: int = 10\n```\n\n## Stage Progression\n```\nThe Pit (waves 1-30) ‚Üí Frozen Depths (31-60) ‚Üí Burning Sands (61-90) ‚Üí Final Descent (91-100)\n         ‚Üì                    ‚Üì                      ‚Üì                      ‚Üì\n    Slime King           Frost Wyrm            Sand Golem              Final Boss\n```\n\n## Implementation\n```gdscript\n# scripts/autoload/stage_manager.gd\nextends Node\n\nvar current_biome: Biome\nvar current_stage: int = 0\nvar stages: Array[Biome] = []\n\nfunc _ready() -\u003e void:\n    _load_stages()\n    GameManager.wave_changed.connect(_on_wave_changed)\n\nfunc _load_stages() -\u003e void:\n    stages = [\n        preload(\"res://resources/biomes/the_pit.tres\"),\n        preload(\"res://resources/biomes/frozen_depths.tres\"),\n        preload(\"res://resources/biomes/burning_sands.tres\"),\n        preload(\"res://resources/biomes/final_descent.tres\"),\n    ]\n    \nfunc advance_stage() -\u003e void:\n    current_stage += 1\n    if current_stage \u003c stages.size():\n        _apply_biome(stages[current_stage])\n    else:\n        _trigger_game_victory()\n\nfunc _apply_biome(biome: Biome) -\u003e void:\n    current_biome = biome\n    _update_visuals()\n    _start_hazards()\n    MusicManager.play_track(biome.music_track)\n```\n\n## Files to Create\n- NEW: scripts/autoload/stage_manager.gd\n- NEW: resources/biomes/biome.gd\n- NEW: resources/biomes/the_pit.tres\n- NEW: resources/biomes/frozen_depths.tres\n- NEW: resources/biomes/burning_sands.tres\n- NEW: resources/biomes/final_descent.tres\n\n## Acceptance Criteria\n- [ ] Biome resource type created\n- [ ] Stage manager handles progression\n- [ ] Backgrounds change per biome\n- [ ] Hazards spawn per biome rules\n- [ ] Boss triggers at correct wave\n- [ ] Stage complete after boss defeat","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:37:53.360749-06:00","created_by":"randroid","updated_at":"2026-01-05T23:37:53.360749-06:00"}
{"id":"GoPit-6wl","title":"Create VirtualJoystick scene (drag to aim, mouse support)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:20.15116-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.018187-06:00","closed_at":"2026-01-04T23:53:52.018187-06:00","close_reason":"Closed"}
{"id":"GoPit-6z8","title":"Add fire button blocked feedback","description":"## Problem\nTapping fire button during cooldown is silently ignored. No feedback that press was registered.\n\n## Implementation Plan\n\n### Add Blocked State Feedback\n**Modify: `scripts/input/fire_button.gd`**\n\n```gdscript\nsignal blocked  # New signal for blocked attempts\n\nvar shake_tween: Tween\n\nfunc _gui_input(event: InputEvent) -\u003e void:\n    if event is InputEventScreenTouch or event is InputEventMouseButton:\n        if event.pressed:\n            if can_fire:\n                _fire()\n            else:\n                _on_blocked()\n\nfunc _on_blocked():\n    blocked.emit()\n    _shake_button()\n    _flash_red()\n    SoundManager.play_blocked()  # Optional subtle click\n\nfunc _shake_button():\n    if shake_tween:\n        shake_tween.kill()\n    \n    var original_pos = position\n    shake_tween = create_tween()\n    shake_tween.tween_property(self, \"position:x\", original_pos.x + 5, 0.05)\n    shake_tween.tween_property(self, \"position:x\", original_pos.x - 5, 0.05)\n    shake_tween.tween_property(self, \"position:x\", original_pos.x + 3, 0.05)\n    shake_tween.tween_property(self, \"position:x\", original_pos.x, 0.05)\n\nfunc _flash_red():\n    var original_color = modulate\n    modulate = Color(1.5, 0.5, 0.5)\n    await get_tree().create_timer(0.1).timeout\n    modulate = original_color\n```\n\n### Optional: Haptic Feedback (Mobile)\n```gdscript\nfunc _on_blocked():\n    # Haptic feedback on supported devices\n    if OS.has_feature(\"mobile\"):\n        Input.vibrate_handheld(50)  # 50ms vibration\n```\n\n### Sound Effect (Optional)\n**Modify: `scripts/autoload/sound_manager.gd`**\n\n```gdscript\nenum SoundType { ..., BLOCKED }\n\nfunc _generate_blocked() -\u003e AudioStreamWAV:\n    # Short, low, muted click\n    # Duration: 0.05s\n    # Frequency: 100Hz\n    # Very quiet\n```\n\n### Files to Modify\n1. MODIFY: `scripts/input/fire_button.gd` - add blocked feedback\n2. MODIFY: `scripts/autoload/sound_manager.gd` - add blocked sound (optional)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:13:40.260334-06:00","created_by":"randroid","updated_at":"2026-01-05T02:46:13.455845-06:00","closed_at":"2026-01-05T02:46:13.455845-06:00","close_reason":"Added shake, flash, and blocked sound when fire button is on cooldown"}
{"id":"GoPit-7of","title":"Connect ball collision to enemy damage","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:46.425583-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.24122-06:00","closed_at":"2026-01-04T23:58:36.24122-06:00","close_reason":"Closed"}
{"id":"GoPit-7vn","title":"Implement ball.gd movement and wall bounce logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:31.41858-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.023984-06:00","closed_at":"2026-01-04T23:53:52.023984-06:00","close_reason":"Closed"}
{"id":"GoPit-84z","title":"Create FireButton scene with cooldown timer","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:20.402744-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.019303-06:00","closed_at":"2026-01-04T23:53:52.019303-06:00","close_reason":"Closed"}
{"id":"GoPit-87x","title":"First Boss: Slime King","description":"# First Boss: Slime King\n\n## Parent Epic\nGoPit-6p4 (Phase 3 - Boss \u0026 Stages)\n\n## Overview\nImplement the first boss encounter - Slime King, appearing at Wave 10 of The Pit biome.\n\n## Boss Design\n**Slime King** - A massive slime that splits and slams\n\n| Stat | Value |\n|------|-------|\n| HP | 500 (scales with wave) |\n| Size | 3x regular slime |\n| XP Value | 100 |\n\n### Phase 1 (100%-66% HP)\n- **Slam Attack**: Jumps and lands on player position, AoE damage\n- **Spawn Minions**: Summons 2-3 regular slimes\n\n### Phase 2 (66%-33% HP)\n- All Phase 1 attacks + faster\n- **Split**: Creates 2 medium slimes that must also be killed\n- Medium slimes have 100 HP each\n\n### Phase 3 (33%-0% HP)\n- All previous attacks + enraged\n- **Rage Mode**: Faster movement, more frequent attacks\n- **Toxic Pool**: Leaves poison pools when moving\n\n### Defeat\n- Explodes into gems (100 XP worth)\n- Drops guaranteed Fusion Reactor\n- Stage complete announcement\n\n## Visual Design\n- Large green slime (3x scale)\n- Crown on top (simple shape)\n- Eyes that track player\n- Color shifts with phase (green ‚Üí yellow ‚Üí red)\n- Shake animation during slam telegraph\n\n## Implementation\n```gdscript\nclass_name SlimeKing\nextends BossBase\n\nfunc _ready() -\u003e void:\n    boss_name = \"Slime King\"\n    max_hp = 500\n    phase_thresholds = [1.0, 0.66, 0.33, 0.0]\n    \nfunc _do_slam_attack() -\u003e void:\n    # Telegraph: shadow appears at player position\n    # Jump up (off screen briefly)\n    # Land at telegraph position\n    # AoE damage in radius\n    pass\n\nfunc _do_summon_attack() -\u003e void:\n    # Spawn 2-3 slimes at random positions\n    pass\n\nfunc _do_split_attack() -\u003e void:\n    # Create 2 medium slimes at boss position\n    # Boss shrinks temporarily\n    pass\n```\n\n## Files to Create\n- NEW: scripts/entities/enemies/bosses/slime_king.gd\n- NEW: scenes/entities/enemies/bosses/slime_king.tscn\n\n## Dependencies\n- Requires Boss Base Class (GoPit-xxx)\n\n## Acceptance Criteria\n- [ ] Slime King spawns at wave 10\n- [ ] 3 distinct phases with different attacks\n- [ ] Slam attack with telegraph\n- [ ] Minion summoning works\n- [ ] Split mechanic in Phase 2\n- [ ] Drops fusion reactor on defeat\n- [ ] Victory triggers stage progress","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:37:53.159092-06:00","created_by":"randroid","updated_at":"2026-01-05T23:37:53.159092-06:00","dependencies":[{"issue_id":"GoPit-87x","depends_on_id":"GoPit-anr","type":"blocks","created_at":"2026-01-05T23:40:33.401455-06:00","created_by":"randroid"}]}
{"id":"GoPit-8h3","title":"Create HUD (HP bar, wave counter)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:00.335073-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.24454-06:00","closed_at":"2026-01-04T23:58:36.24454-06:00","close_reason":"Closed"}
{"id":"GoPit-8hv","title":"Epic 3: Ball System","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:13:55.403382-06:00","created_by":"randroid","updated_at":"2026-01-05T00:06:20.832297-06:00","closed_at":"2026-01-05T00:06:20.832297-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-6s6","type":"blocks","created_at":"2026-01-04T23:17:25.396882-06:00","created_by":"randroid"},{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-7vn","type":"blocks","created_at":"2026-01-04T23:17:25.459075-06:00","created_by":"randroid"},{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-9rd","type":"blocks","created_at":"2026-01-04T23:17:25.521201-06:00","created_by":"randroid"},{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-sm9","type":"blocks","created_at":"2026-01-04T23:17:25.583412-06:00","created_by":"randroid"},{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-5kj","type":"blocks","created_at":"2026-01-04T23:17:25.643856-06:00","created_by":"randroid"},{"issue_id":"GoPit-8hv","depends_on_id":"GoPit-ya7","type":"blocks","created_at":"2026-01-04T23:17:44.881672-06:00","created_by":"randroid"}]}
{"id":"GoPit-9as","title":"Epic 6: XP \u0026 Level-Up","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:14:05.087568-06:00","created_by":"randroid","updated_at":"2026-01-05T01:15:24.177457-06:00","closed_at":"2026-01-05T01:15:24.177457-06:00","close_reason":"All sub-tasks completed","dependencies":[{"issue_id":"GoPit-9as","depends_on_id":"GoPit-ud8","type":"blocks","created_at":"2026-01-04T23:17:26.892644-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-p89","type":"blocks","created_at":"2026-01-04T23:17:26.953981-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-p5d","type":"blocks","created_at":"2026-01-04T23:17:27.015111-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-07u","type":"blocks","created_at":"2026-01-04T23:17:27.078097-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-1bl","type":"blocks","created_at":"2026-01-04T23:17:27.139886-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-1lq","type":"blocks","created_at":"2026-01-04T23:17:27.20127-06:00","created_by":"randroid"},{"issue_id":"GoPit-9as","depends_on_id":"GoPit-s0e","type":"blocks","created_at":"2026-01-04T23:17:45.576485-06:00","created_by":"randroid"}]}
{"id":"GoPit-9gy","title":"Create game.tscn scaffold with background and containers","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:10.605165-06:00","created_by":"randroid","updated_at":"2026-01-04T23:40:12.025651-06:00","closed_at":"2026-01-04T23:40:12.025651-06:00","close_reason":"Closed"}
{"id":"GoPit-9oq","title":"Add ball type variants (Fire, Ice, Multi)","description":"## Problem\nOnly basic blue ball exists. No variety in gameplay.\n\n## Implementation Plan\n\n### Ball Type Enum\n**Modify: `scripts/entities/ball.gd`**\n\n```gdscript\nenum BallType { BASIC, FIRE, ICE, MULTI }\n\n@export var ball_type: BallType = BallType.BASIC\n\n# Type-specific properties\nvar burn_damage: int = 0\nvar slow_amount: float = 0.0\nvar split_on_hit: bool = false\n\nfunc _ready():\n    _apply_type_properties()\n    queue_redraw()\n\nfunc _apply_type_properties():\n    match ball_type:\n        BallType.BASIC:\n            ball_color = Color(0.3, 0.7, 1.0)  # Blue\n        BallType.FIRE:\n            ball_color = Color(1.0, 0.4, 0.1)  # Orange\n            burn_damage = 3  # DoT\n        BallType.ICE:\n            ball_color = Color(0.5, 0.9, 1.0)  # Cyan\n            slow_amount = 0.5  # 50% slow\n        BallType.MULTI:\n            ball_color = Color(1.0, 0.8, 0.2)  # Gold\n            split_on_hit = true\n\nfunc _on_hit_enemy(enemy, collision):\n    # Apply base damage\n    enemy.take_damage(damage)\n    \n    # Type-specific effects\n    match ball_type:\n        BallType.FIRE:\n            enemy.apply_burn(burn_damage, 3.0)  # 3 damage over 3 seconds\n        BallType.ICE:\n            enemy.apply_slow(slow_amount, 2.0)  # 50% slow for 2 seconds\n        BallType.MULTI:\n            if split_on_hit:\n                _split_ball(collision.get_normal())\n                split_on_hit = false  # Only split once\n\nfunc _split_ball(normal: Vector2):\n    # Spawn 2 additional balls at 45 degree angles\n    var spawner = get_tree().get_first_node_in_group(\"ball_spawner\")\n    if spawner:\n        var left_dir = direction.rotated(-PI/4)\n        var right_dir = direction.rotated(PI/4)\n        spawner._spawn_ball_at(global_position, left_dir, BallType.BASIC)\n        spawner._spawn_ball_at(global_position, right_dir, BallType.BASIC)\n```\n\n### Enemy Status Effects\n**Modify: `scripts/entities/enemies/enemy_base.gd`**\n\n```gdscript\nvar burn_timer: float = 0.0\nvar burn_dps: int = 0\nvar slow_timer: float = 0.0\nvar slow_amount: float = 0.0\nvar base_speed: float = 0.0\n\nfunc _ready():\n    base_speed = speed\n\nfunc apply_burn(dps: int, duration: float):\n    burn_dps = dps\n    burn_timer = duration\n    # Visual: add fire particles\n\nfunc apply_slow(amount: float, duration: float):\n    slow_amount = amount\n    slow_timer = duration\n    speed = base_speed * (1.0 - slow_amount)\n    modulate = Color(0.7, 0.9, 1.0)  # Icy tint\n\nfunc _process(delta):\n    # Burn damage\n    if burn_timer \u003e 0:\n        burn_timer -= delta\n        take_damage(int(burn_dps * delta))\n    \n    # Slow expiry\n    if slow_timer \u003e 0:\n        slow_timer -= delta\n        if slow_timer \u003c= 0:\n            speed = base_speed\n            modulate = Color.WHITE\n```\n\n### Ball Spawner Integration\n**Modify: `scripts/entities/ball_spawner.gd`**\n\n```gdscript\nvar current_ball_type: Ball.BallType = Ball.BallType.BASIC\n\nfunc set_ball_type(type: Ball.BallType):\n    current_ball_type = type\n\nfunc _spawn_ball(dir: Vector2):\n    var ball = ball_scene.instantiate()\n    ball.ball_type = current_ball_type\n    ball.damage = ball_damage\n    ball.position = global_position + dir * 30\n    ball.set_direction(dir)\n    balls_container.add_child(ball)\n```\n\n### Unlock System\nBall types can be unlocked via meta-progression (Pit Coins) or as rare level-up upgrades.\n\n### Files to Modify\n1. MODIFY: `scripts/entities/ball.gd` - ball types\n2. MODIFY: `scripts/entities/enemies/enemy_base.gd` - status effects\n3. MODIFY: `scripts/entities/ball_spawner.gd` - type selection\n4. MODIFY: `scripts/ui/level_up_overlay.gd` - ball type upgrades","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T02:15:32.979968-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.526212-06:00","closed_at":"2026-01-05T10:31:02.526212-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-9oq","depends_on_id":"GoPit-28w","type":"blocks","created_at":"2026-01-05T02:15:50.101465-06:00","created_by":"randroid"}]}
{"id":"GoPit-9r3","title":"Add low HP screen warning effect","description":"## Problem\nHP bar is small and might be missed during action. No warning when HP is critically low.\n\n## Implementation Plan\n\n### Create Danger Vignette Effect\n**File: `scripts/effects/low_hp_warning.gd`** (new)\n\n```gdscript\nextends ColorRect\n## Persistent red vignette when HP is low\n\nconst LOW_HP_THRESHOLD: float = 0.25  # 25% HP\n\nvar pulse_tween: Tween\nvar is_warning: bool = false\n\nfunc _ready():\n    color = Color(0.8, 0, 0, 0)\n    mouse_filter = Control.MOUSE_FILTER_IGNORE\n    GameManager.state_changed.connect(_on_state_changed)\n\nfunc _process(_delta):\n    if GameManager.current_state != GameManager.GameState.PLAYING:\n        return\n    \n    var hp_ratio = float(GameManager.player_hp) / float(GameManager.max_hp)\n    \n    if hp_ratio \u003c= LOW_HP_THRESHOLD and not is_warning:\n        _start_warning()\n    elif hp_ratio \u003e LOW_HP_THRESHOLD and is_warning:\n        _stop_warning()\n\nfunc _start_warning():\n    is_warning = true\n    \n    if pulse_tween:\n        pulse_tween.kill()\n    \n    pulse_tween = create_tween().set_loops()\n    pulse_tween.tween_property(self, \"color:a\", 0.3, 0.5)\n    pulse_tween.tween_property(self, \"color:a\", 0.1, 0.5)\n    \n    # Optional: Add heartbeat sound\n    # SoundManager.start_heartbeat()\n\nfunc _stop_warning():\n    is_warning = false\n    \n    if pulse_tween:\n        pulse_tween.kill()\n    \n    var fade = create_tween()\n    fade.tween_property(self, \"color:a\", 0.0, 0.3)\n    \n    # SoundManager.stop_heartbeat()\n\nfunc _on_state_changed(_old, new):\n    if new != GameManager.GameState.PLAYING:\n        _stop_warning()\n```\n\n### Vignette Shader (Optional but nicer)\n**File: `shaders/vignette.gdshader`**\n\n```gdshader\nshader_type canvas_item;\n\nuniform vec4 color : source_color = vec4(0.8, 0.0, 0.0, 1.0);\nuniform float intensity : hint_range(0.0, 1.0) = 0.0;\nuniform float radius : hint_range(0.0, 1.0) = 0.5;\n\nvoid fragment() {\n    vec2 uv = UV - 0.5;\n    float dist = length(uv);\n    float vignette = smoothstep(radius, radius + 0.3, dist);\n    COLOR = vec4(color.rgb, vignette * intensity * color.a);\n}\n```\n\n### Add to Game Scene\n**Modify: `scenes/game.tscn`**\n\nAdd as child of UI CanvasLayer, covering full screen.\n\n### Optional: Heartbeat Sound\n**Modify: `scripts/autoload/sound_manager.gd`**\n\n```gdscript\nvar heartbeat_player: AudioStreamPlayer\nvar heartbeat_timer: float = 0.0\n\nfunc start_heartbeat():\n    heartbeat_active = true\n\nfunc stop_heartbeat():\n    heartbeat_active = false\n\nfunc _process(delta):\n    if heartbeat_active:\n        heartbeat_timer += delta\n        if heartbeat_timer \u003e= 0.8:  # Heartbeat rhythm\n            heartbeat_timer = 0\n            play(SoundType.HEARTBEAT)\n```\n\n### Files to Create/Modify\n1. NEW: `scripts/effects/low_hp_warning.gd`\n2. NEW: `shaders/vignette.gdshader` (optional)\n3. MODIFY: `scenes/game.tscn` - add warning overlay\n4. MODIFY: `scripts/autoload/sound_manager.gd` - heartbeat (optional)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:13:40.766327-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.52256-06:00","closed_at":"2026-01-05T10:31:02.52256-06:00","close_reason":"Closed"}
{"id":"GoPit-9rd","title":"Create BallSpawner to fire balls in aimed direction","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:31.681186-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.02514-06:00","closed_at":"2026-01-04T23:53:52.02514-06:00","close_reason":"Closed"}
{"id":"GoPit-9vr","title":"Add placeholder sounds (optional)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T23:16:29.752837-06:00","created_by":"randroid","updated_at":"2026-01-05T01:19:15.198938-06:00","closed_at":"2026-01-05T01:19:15.198938-06:00","close_reason":"Added procedural placeholder sounds for all game events"}
{"id":"GoPit-a0p","title":"Add special ability (Ultimate)","description":"## Problem\nNo power moment. Just steady fire. Players need satisfying payoff.\n\n## Implementation Plan\n\n### Ultimate Ability System\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\nsignal ultimate_ready\nsignal ultimate_used\nsignal ultimate_charge_changed(current: float, max: float)\n\nconst ULTIMATE_CHARGE_MAX: float = 100.0\nconst CHARGE_PER_KILL: float = 10.0\nconst CHARGE_PER_GEM: float = 5.0\n\nvar ultimate_charge: float = 0.0\n\nfunc add_ultimate_charge(amount: float):\n    var was_ready = ultimate_charge \u003e= ULTIMATE_CHARGE_MAX\n    ultimate_charge = min(ULTIMATE_CHARGE_MAX, ultimate_charge + amount)\n    ultimate_charge_changed.emit(ultimate_charge, ULTIMATE_CHARGE_MAX)\n    \n    if not was_ready and ultimate_charge \u003e= ULTIMATE_CHARGE_MAX:\n        ultimate_ready.emit()\n\nfunc use_ultimate() -\u003e bool:\n    if ultimate_charge \u003e= ULTIMATE_CHARGE_MAX:\n        ultimate_charge = 0\n        ultimate_used.emit()\n        ultimate_charge_changed.emit(0, ULTIMATE_CHARGE_MAX)\n        return true\n    return false\n```\n\n### Ultimate Types\n**File: `scripts/effects/ultimate_blast.gd`** (new)\n\n```gdscript\nextends Node2D\n## Screen-clearing blast ultimate\n\nfunc execute():\n    # Visual effect\n    var flash = ColorRect.new()\n    flash.color = Color(1, 1, 1, 0.8)\n    flash.size = get_viewport().size\n    get_tree().current_scene.add_child(flash)\n    \n    # Fade out flash\n    var tween = create_tween()\n    tween.tween_property(flash, \"color:a\", 0.0, 0.5)\n    tween.tween_callback(flash.queue_free)\n    \n    # Kill all enemies on screen\n    var enemies = get_tree().get_nodes_in_group(\"enemies\")\n    for enemy in enemies:\n        if enemy is EnemyBase:\n            enemy.take_damage(9999)\n    \n    # Screen shake\n    CameraShake.shake(20.0, 2.0)\n    \n    # Sound effect\n    SoundManager.play(SoundManager.SoundType.ULTIMATE)\n    \n    queue_free()\n```\n\n### Ultimate Button UI\n**Modify: `scenes/game.tscn`**\n\nAdd ultimate button next to fire button (or as overlay on fire button when ready).\n\n**File: `scripts/ui/ultimate_button.gd`** (new)\n\n```gdscript\nextends Control\n\n@onready var progress_bar: ProgressBar = $ProgressBar\n@onready var ready_indicator: Control = $ReadyIndicator\n\nvar pulse_tween: Tween\n\nfunc _ready():\n    ready_indicator.visible = false\n    GameManager.ultimate_charge_changed.connect(_on_charge_changed)\n    GameManager.ultimate_ready.connect(_on_ultimate_ready)\n\nfunc _on_charge_changed(current: float, max_charge: float):\n    progress_bar.value = current / max_charge * 100\n    \n    if current \u003c max_charge:\n        ready_indicator.visible = false\n        if pulse_tween:\n            pulse_tween.kill()\n\nfunc _on_ultimate_ready():\n    ready_indicator.visible = true\n    \n    # Pulsing glow effect\n    pulse_tween = create_tween().set_loops()\n    pulse_tween.tween_property(ready_indicator, \"modulate\", Color(1.5, 1.5, 0.5), 0.5)\n    pulse_tween.tween_property(ready_indicator, \"modulate\", Color(1.0, 1.0, 1.0), 0.5)\n\nfunc _gui_input(event):\n    if event is InputEventScreenTouch and event.pressed:\n        if GameManager.use_ultimate():\n            _execute_ultimate()\n\nfunc _execute_ultimate():\n    var blast = preload(\"res://scenes/effects/ultimate_blast.tscn\").instantiate()\n    get_tree().current_scene.add_child(blast)\n    blast.execute()\n```\n\n### Wire Up Charge Gain\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _on_enemy_died(enemy: EnemyBase):\n    GameManager.add_ultimate_charge(GameManager.CHARGE_PER_KILL)\n    # existing code...\n\nfunc _on_gem_collected(gem):\n    GameManager.add_ultimate_charge(GameManager.CHARGE_PER_GEM)\n    # existing code...\n```\n\n### Files to Create/Modify\n1. MODIFY: `scripts/autoload/game_manager.gd` - ultimate charge system\n2. NEW: `scenes/effects/ultimate_blast.tscn`\n3. NEW: `scripts/effects/ultimate_blast.gd`\n4. NEW: `scenes/ui/ultimate_button.tscn`\n5. NEW: `scripts/ui/ultimate_button.gd`\n6. MODIFY: `scenes/game.tscn` - add ultimate button\n7. MODIFY: `scripts/game/game_controller.gd` - wire charge gain\n8. MODIFY: `scripts/autoload/sound_manager.gd` - add ULTIMATE sound","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-05T02:15:33.520331-06:00","created_by":"randroid","updated_at":"2026-01-05T02:15:33.520331-06:00"}
{"id":"GoPit-a8z","title":"Scale enemy HP/speed with wave number","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:16:28.961304-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.996586-06:00","closed_at":"2026-01-05T00:01:32.996586-06:00","close_reason":"Closed"}
{"id":"GoPit-acg","title":"Player Free Movement System","description":"# Player Free Movement System\n\n## Parent Epic\nGoPit-3ky (Phase 1 - Core Alignment)\n\n## Overview\nReplace the fixed player position with a freely movable player character that can navigate the entire play area.\n\n## Current State\n- Player has no visible sprite or movement\n- \"Player zone\" is an Area2D at the bottom of screen (y=1200)\n- Joystick currently only controls aim direction\n- Gems/enemies interact with player_zone Area2D\n\n## Requirements\n1. Create visible player character sprite\n2. Player can move anywhere in the game area (not just bottom)\n3. Movement controlled by left virtual joystick\n4. Separate aim direction from movement direction\n5. Player has collision body for gem/enemy interaction\n6. Movement speed: ~300 pixels/second (tunable)\n\n## Implementation Approach\n\n### Step 1: Create Player Scene\nCreate new scene: scenes/entities/player.tscn\n- CharacterBody2D root\n- CollisionShape2D (circle, radius ~20)\n- Sprite or custom _draw() for visuals\n- Script: scripts/entities/player.gd\n\n### Step 2: Player Script\n```gdscript\nclass_name Player\nextends CharacterBody2D\n\nsignal damaged(amount: int)\n\n@export var move_speed: float = 300.0\n\nfunc _physics_process(delta: float) -\u003e void:\n    # Get movement input from joystick\n    var input_dir := _get_movement_input()\n    velocity = input_dir * move_speed\n    move_and_slide()\n\nfunc _get_movement_input() -\u003e Vector2:\n    # Connect to joystick signal or read directly\n    pass\n```\n\n### Step 3: Modify Control Scheme\nOption A: Single joystick (move + aim)\n- Joystick moves player\n- Fire direction = movement direction (or last moved direction)\n\nOption B: Twin stick (recommended for BallxPit feel)\n- Left joystick = movement\n- Fire button + drag = aim direction\n- Or: auto-aim at nearest enemy\n\n### Step 4: Update game_controller.gd\n- Instantiate player in GameArea\n- Wire joystick to player movement\n- Update references from player_zone to player node\n- Keep player_zone for backward compatibility or remove\n\n### Step 5: Update Collision Layers\nCurrent layers:\n- 1: Walls\n- 2: Balls  \n- 4: Enemies\n- 8: Gems\n- 16: Player (add this)\n\nPlayer collision:\n- Layer: 16 (player)\n- Mask: 4 (enemies) + 8 (gems)\n\n## Files to Modify\n- NEW: scenes/entities/player.tscn\n- NEW: scripts/entities/player.gd\n- MODIFY: scripts/game/game_controller.gd\n- MODIFY: scripts/input/virtual_joystick.gd (if needed)\n- MODIFY: project.godot (collision layers)\n\n## Testing\nAfter implementation, these tests should pass:\n```python\nasync def test_player_movement(game):\n    # Get initial position\n    pos1 = await game.get_property(\"/root/Game/GameArea/Player\", \"position\")\n    \n    # Simulate joystick input\n    await game.call(\"/root/Game/UI/HUD/.../VirtualJoystick\", \"set_direction\", [Vector2(1, 0)])\n    await asyncio.sleep(0.5)\n    \n    # Verify player moved right\n    pos2 = await game.get_property(\"/root/Game/GameArea/Player\", \"position\")\n    assert pos2['x'] \u003e pos1['x']\n```\n\n## Acceptance Criteria\n- [ ] Player sprite visible on screen\n- [ ] Player moves with joystick input\n- [ ] Player stays within game boundaries\n- [ ] Player can collect gems by touching them\n- [ ] Player takes damage when enemy touches them\n- [ ] Movement feels responsive (no lag)\n\n## Notes\n- Consider adding player invincibility frames after taking damage\n- May need to adjust gem magnetism to work with moving player\n- BallxPit player moves at moderate speed - not too fast","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-05T23:21:40.215201-06:00","created_by":"randroid","updated_at":"2026-01-05T23:21:40.215201-06:00"}
{"id":"GoPit-anr","title":"Boss Base Class \u0026 Framework","description":"# Boss Base Class \u0026 Framework\n\n## Parent Epic\nGoPit-6p4 (Phase 3 - Boss \u0026 Stages)\n\n## Overview\nCreate a reusable boss base class with phase transitions, HP bars, attack patterns, and invulnerability windows.\n\n## Requirements\n1. BossBase extends EnemyBase with boss-specific features\n2. Multi-phase boss fights (HP thresholds trigger phase changes)\n3. Large HP bar displayed on screen\n4. Telegraphed attacks with visual indicators\n5. Invulnerability windows during phase transitions\n6. Add spawning during fight\n7. Victory/defeat handling\n\n## Implementation Approach\n\n### Boss State Machine\n```gdscript\nclass_name BossBase\nextends EnemyBase\n\nenum BossPhase { INTRO, PHASE_1, PHASE_2, PHASE_3, DEFEATED }\nenum AttackState { IDLE, TELEGRAPH, ATTACKING, COOLDOWN }\n\nsignal phase_changed(new_phase: BossPhase)\nsignal boss_defeated\n\nvar current_phase: BossPhase = BossPhase.INTRO\nvar attack_state: AttackState = AttackState.IDLE\nvar is_invulnerable: bool = false\n\n# Phase thresholds (HP percentage)\nvar phase_thresholds := [1.0, 0.66, 0.33, 0.0]\n\nfunc _ready() -\u003e void:\n    super._ready()\n    _start_intro()\n\nfunc take_damage(amount: int) -\u003e void:\n    if is_invulnerable:\n        return\n    super.take_damage(amount)\n    _check_phase_transition()\n```\n\n### Attack Pattern System\n```gdscript\n# Each boss defines attack patterns per phase\nvar phase_attacks := {\n    BossPhase.PHASE_1: [\"slam\", \"summon\"],\n    BossPhase.PHASE_2: [\"slam\", \"summon\", \"projectile\"],\n    BossPhase.PHASE_3: [\"slam\", \"summon\", \"projectile\", \"rage\"]\n}\n\nfunc _execute_attack(attack_name: String) -\u003e void:\n    attack_state = AttackState.TELEGRAPH\n    _show_attack_telegraph(attack_name)\n    await get_tree().create_timer(1.0).timeout\n    \n    attack_state = AttackState.ATTACKING\n    match attack_name:\n        \"slam\": _do_slam_attack()\n        \"summon\": _do_summon_attack()\n        \"projectile\": _do_projectile_attack()\n        \"rage\": _do_rage_attack()\n```\n\n### HP Bar UI\n```gdscript\n# scenes/ui/boss_hp_bar.tscn\n# Show at top of screen when boss active\nfunc update_hp(current: int, max_val: int, boss_name: String) -\u003e void:\n    hp_bar.value = float(current) / max_val\n    name_label.text = boss_name\n    # Phase indicators\n```\n\n## Files to Create\n- NEW: scripts/entities/enemies/boss_base.gd\n- NEW: scenes/entities/enemies/boss_base.tscn\n- NEW: scenes/ui/boss_hp_bar.tscn\n- NEW: scripts/ui/boss_hp_bar.gd\n\n## Acceptance Criteria\n- [ ] BossBase class with phase system\n- [ ] HP bar displays during boss fight\n- [ ] Phase transitions at HP thresholds\n- [ ] Invulnerability during transitions\n- [ ] Attack telegraph system\n- [ ] Add spawning capability\n- [ ] Victory/defeat signals","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:37:52.960919-06:00","created_by":"randroid","updated_at":"2026-01-05T23:37:52.960919-06:00"}
{"id":"GoPit-aoo","title":"EPIC: Phase 5 - Polish \u0026 Release","description":"# Phase 5: Polish \u0026 Release Readiness\n\n## Overview\nFinal polish pass including audio, visual effects, mobile optimization, and release preparation.\n\n## Success Criteria\n- [ ] Unique music per biome\n- [ ] Complete SFX coverage\n- [ ] Particle effects for all actions\n- [ ] Tutorial for new players\n- [ ] Mobile performance optimized (60fps)\n- [ ] Web export working\n- [ ] All tests passing\n\n## Reference\n- [GDD.md Section 7](./GDD.md#7-development-roadmap)\n\n## Technical Context\nCurrent state:\n- sound_manager.gd has basic SFX\n- music_manager.gd plays single track\n- camera_shake.gd, hit_particles.gd exist\n- tutorial_overlay.gd has basic tutorial\n- PlayGodot tests exist in tests/\n\n## Audio Needs\nPer biome:\n- Background music track\n- Ambient sounds\n- Boss fight music\n\nSFX gaps to fill:\n- Ball type-specific sounds\n- Status effect sounds\n- Boss attack sounds\n- UI feedback sounds\n\n## Visual Polish\n- Ball trails per type\n- Status effect particles\n- Boss attack telegraphs\n- Screen transitions between biomes\n- Victory/defeat animations\n\n## Performance\n- Profile on mobile devices\n- Optimize particle systems\n- Batch draw calls\n- Memory management for long sessions\n\n## Child Tasks\n1. Biome Music \u0026 Ambience\n2. Complete SFX Pass\n3. Visual Effects Polish\n4. Tutorial Expansion\n5. Mobile Optimization\n6. Web Export \u0026 Testing\n\n## Dependencies\nDepends on all prior phases being feature-complete","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-05T23:19:25.78436-06:00","created_by":"randroid","updated_at":"2026-01-05T23:19:25.78436-06:00","dependencies":[{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-0it","type":"blocks","created_at":"2026-01-05T23:43:11.425759-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-5tv","type":"blocks","created_at":"2026-01-05T23:43:11.474465-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-29a","type":"blocks","created_at":"2026-01-05T23:43:11.52287-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-3ky","type":"blocks","created_at":"2026-01-05T23:43:11.571814-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-zxr","type":"blocks","created_at":"2026-01-05T23:43:11.62004-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-6p4","type":"blocks","created_at":"2026-01-05T23:43:11.667416-06:00","created_by":"randroid"},{"issue_id":"GoPit-aoo","depends_on_id":"GoPit-ivv","type":"blocks","created_at":"2026-01-05T23:43:11.714014-06:00","created_by":"randroid"}]}
{"id":"GoPit-ape","title":"Add randomness to enemy spawn intervals","description":"## Problem\nEnemies spawn at fixed intervals. Creates mechanical, predictable rhythm.\n\n## Implementation Plan\n\n### Add Variance to Spawn Timer\n**Modify: `scripts/entities/enemies/enemy_spawner.gd`**\n\n```gdscript\n@export var spawn_variance: float = 0.5  # ¬±0.5 seconds\n\nfunc _start_spawn_timer() -\u003e void:\n    var variance = randf_range(-spawn_variance, spawn_variance)\n    var next_spawn = max(0.3, spawn_interval + variance)  # Min 0.3s\n    spawn_timer.wait_time = next_spawn\n    spawn_timer.start()\n\nfunc _on_spawn_timer_timeout() -\u003e void:\n    _spawn_enemy()\n    _start_spawn_timer()  # Restart with new random interval\n```\n\n### Optional: Burst Spawning\nOccasionally spawn multiple enemies at once:\n\n```gdscript\n@export var burst_chance: float = 0.1  # 10% chance\n@export var burst_count_range: Vector2i = Vector2i(2, 3)\n\nfunc _spawn_enemy() -\u003e void:\n    var count = 1\n    if randf() \u003c burst_chance:\n        count = randi_range(burst_count_range.x, burst_count_range.y)\n        # Brief delay between burst spawns\n        for i in range(count):\n            _do_spawn()\n            if i \u003c count - 1:\n                await get_tree().create_timer(0.2).timeout\n    else:\n        _do_spawn()\n\nfunc _do_spawn() -\u003e void:\n    var enemy = slime_scene.instantiate()\n    # ... existing spawn logic\n```\n\n### Wave Scaling\nIncrease variance and burst chance with waves:\n\n```gdscript\nfunc set_spawn_interval(interval: float) -\u003e void:\n    spawn_interval = interval\n    # Increase burst chance as game speeds up\n    burst_chance = min(0.3, 0.1 + (2.0 - interval) * 0.1)\n```\n\n### Files to Modify\n1. MODIFY: `scripts/entities/enemies/enemy_spawner.gd` - add variance and bursts","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:12:31.429763-06:00","created_by":"randroid","updated_at":"2026-01-05T02:46:13.075165-06:00","closed_at":"2026-01-05T02:46:13.075165-06:00","close_reason":"Added spawn variance and burst spawning that scales with wave difficulty"}
{"id":"GoPit-bhu","title":"Add combo system with XP multiplier","description":"## Problem\nNo reward for rapid kills. Skill expression is limited.\n\n## Implementation Plan\n\n### Combo Tracking in GameManager\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\nsignal combo_changed(combo: int, multiplier: float)\n\nconst COMBO_TIMEOUT: float = 2.0\nconst COMBO_MULTIPLIERS := {\n    0: 1.0,\n    3: 1.25,\n    5: 1.5,\n    10: 2.0,\n    20: 3.0\n}\n\nvar current_combo: int = 0\nvar combo_timer: float = 0.0\nvar combo_multiplier: float = 1.0\n\nfunc _process(delta):\n    if current_state == GameState.PLAYING and combo_timer \u003e 0:\n        combo_timer -= delta\n        if combo_timer \u003c= 0:\n            _reset_combo()\n\nfunc add_combo():\n    current_combo += 1\n    combo_timer = COMBO_TIMEOUT\n    \n    # Calculate multiplier\n    for threshold in COMBO_MULTIPLIERS:\n        if current_combo \u003e= threshold:\n            combo_multiplier = COMBO_MULTIPLIERS[threshold]\n    \n    combo_changed.emit(current_combo, combo_multiplier)\n\nfunc _reset_combo():\n    if current_combo \u003e stats.highest_combo:\n        stats.highest_combo = current_combo\n    current_combo = 0\n    combo_multiplier = 1.0\n    combo_changed.emit(0, 1.0)\n\nfunc add_xp(amount: int) -\u003e void:\n    var modified_xp = int(amount * combo_multiplier)\n    current_xp += modified_xp\n    # ...\n```\n\n### Combo UI Display\n**File: `scripts/ui/combo_display.gd`** (new)\n\n```gdscript\nextends Control\n\n@onready var combo_label: Label = $ComboLabel\n@onready var multiplier_label: Label = $MultiplierLabel\n\nvar display_tween: Tween\n\nfunc _ready():\n    visible = false\n    GameManager.combo_changed.connect(_on_combo_changed)\n\nfunc _on_combo_changed(combo: int, multiplier: float):\n    if combo == 0:\n        _hide_display()\n        return\n    \n    visible = true\n    combo_label.text = \"%d\" % combo\n    multiplier_label.text = \"x%.1f\" % multiplier if multiplier \u003e 1.0 else \"\"\n    \n    # Pop animation\n    if display_tween:\n        display_tween.kill()\n    \n    scale = Vector2(1.3, 1.3)\n    display_tween = create_tween()\n    display_tween.tween_property(self, \"scale\", Vector2(1.0, 1.0), 0.15).set_ease(Tween.EASE_OUT)\n\nfunc _hide_display():\n    var tween = create_tween()\n    tween.tween_property(self, \"modulate:a\", 0.0, 0.3)\n    tween.tween_callback(func(): visible = false; modulate.a = 1.0)\n```\n\n### Wire Up Combo Increments\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _on_enemy_died(enemy: EnemyBase) -\u003e void:\n    GameManager.add_combo()\n    # existing code...\n```\n\n### Visual Design\n- Large combo number in center-right of screen\n- Multiplier text below (only shown when \u003e 1x)\n- Color changes: white (1-4), yellow (5-9), orange (10-19), red (20+)\n- Shake effect when combo increases\n\n### Files to Create/Modify\n1. MODIFY: `scripts/autoload/game_manager.gd` - combo tracking\n2. NEW: `scenes/ui/combo_display.tscn`\n3. NEW: `scripts/ui/combo_display.gd`\n4. MODIFY: `scenes/game.tscn` - add combo display\n5. MODIFY: `scripts/game/game_controller.gd` - trigger combo","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T02:15:32.464892-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.523927-06:00","closed_at":"2026-01-05T10:31:02.523927-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-bhu","depends_on_id":"GoPit-33z","type":"blocks","created_at":"2026-01-05T02:15:50.316233-06:00","created_by":"randroid"}]}
{"id":"GoPit-blo","title":"Add pitch variation to sound effects","description":"## Problem\nSame procedural sounds repeat constantly. Gets annoying with high fire rate.\n\n## Implementation Plan\n\n### Add Pitch Variation to Play Function\n**Modify: `scripts/autoload/sound_manager.gd`**\n\n```gdscript\n@export var pitch_variance: float = 0.1  # ¬±10% pitch variation\n\nfunc play(sound_type: SoundType) -\u003e void:\n    var player := _get_available_player()\n    if not player:\n        return\n    \n    # Generate the sound\n    player.stream = _generate_sound(sound_type)\n    \n    # Apply random pitch variation\n    player.pitch_scale = randf_range(1.0 - pitch_variance, 1.0 + pitch_variance)\n    \n    player.play()\n```\n\n### Per-Sound Variance Settings\nDifferent sounds benefit from different variance amounts:\n\n```gdscript\nconst SOUND_SETTINGS := {\n    SoundType.FIRE: {\"pitch_variance\": 0.15, \"volume_variance\": 0.1},\n    SoundType.HIT_WALL: {\"pitch_variance\": 0.2, \"volume_variance\": 0.15},\n    SoundType.HIT_ENEMY: {\"pitch_variance\": 0.1, \"volume_variance\": 0.1},\n    SoundType.ENEMY_DEATH: {\"pitch_variance\": 0.05, \"volume_variance\": 0.05},\n    SoundType.GEM_COLLECT: {\"pitch_variance\": 0.2, \"volume_variance\": 0.1},\n    SoundType.PLAYER_DAMAGE: {\"pitch_variance\": 0.05, \"volume_variance\": 0.0},  # Consistent for recognition\n    SoundType.LEVEL_UP: {\"pitch_variance\": 0.0, \"volume_variance\": 0.0},  # Always same\n    SoundType.GAME_OVER: {\"pitch_variance\": 0.0, \"volume_variance\": 0.0}\n}\n\nfunc play(sound_type: SoundType) -\u003e void:\n    var settings = SOUND_SETTINGS.get(sound_type, {})\n    var pitch_var = settings.get(\"pitch_variance\", 0.1)\n    var vol_var = settings.get(\"volume_variance\", 0.1)\n    \n    player.pitch_scale = randf_range(1.0 - pitch_var, 1.0 + pitch_var)\n    player.volume_db = randf_range(-vol_var * 6, vol_var * 6)  # ¬±0.6dB at 0.1 variance\n```\n\n### Alternative: Multiple Sound Variants\nPre-generate 3 variants of each sound at startup:\n\n```gdscript\nvar sound_variants: Dictionary = {}  # SoundType -\u003e Array[AudioStreamWAV]\n\nfunc _ready():\n    for sound_type in SoundType.values():\n        sound_variants[sound_type] = []\n        for i in range(3):\n            sound_variants[sound_type].append(_generate_sound(sound_type))\n\nfunc play(sound_type: SoundType) -\u003e void:\n    var variants = sound_variants[sound_type]\n    var stream = variants[randi() % variants.size()]\n    # ...\n```\n\n### Files to Modify\n1. MODIFY: `scripts/autoload/sound_manager.gd` - add pitch/volume variance","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:12:31.707031-06:00","created_by":"randroid","updated_at":"2026-01-05T02:46:13.265739-06:00","closed_at":"2026-01-05T02:46:13.265739-06:00","close_reason":"Added per-sound pitch and volume variance to reduce repetition"}
{"id":"GoPit-blx","title":"Add gem magnetism toward player zone","description":"## Problem\nGems fall straight down at fixed speed. No attraction. Players passively wait for collection.\n\n## Implementation Plan\n\n### Add Magnetism to Gem Entity\n**Modify: `scripts/entities/gem.gd`**\n\n```gdscript\n@export var magnetism_range: float = 300.0\n@export var magnetism_strength: float = 2.0\n@export var max_speed: float = 500.0\n\nconst PLAYER_ZONE_Y: float = 1200.0\n\nfunc _physics_process(delta: float) -\u003e void:\n    var distance_to_zone = PLAYER_ZONE_Y - global_position.y\n    \n    if distance_to_zone \u003c magnetism_range and distance_to_zone \u003e 0:\n        # Calculate pull strength (stronger when closer)\n        var pull_factor = 1.0 - (distance_to_zone / magnetism_range)\n        pull_factor = pow(pull_factor, 0.5)  # Ease curve\n        \n        # Accelerate toward zone\n        var target_speed = lerp(fall_speed, max_speed, pull_factor)\n        fall_speed = move_toward(fall_speed, target_speed, magnetism_strength * 100 * delta)\n        \n        # Also pull horizontally toward center\n        var center_x = 360.0  # Screen center\n        var horizontal_pull = (center_x - global_position.x) * pull_factor * 0.5\n        global_position.x += horizontal_pull * delta\n    \n    # Continue normal fall\n    global_position.y += fall_speed * delta\n```\n\n### Visual Feedback\nWhen magnetism kicks in:\n- Add subtle sparkle trail\n- Increase gem brightness slightly\n\n```gdscript\nfunc _draw():\n    # Base gem draw...\n    \n    if fall_speed \u003e base_fall_speed * 1.5:\n        # Draw speed lines or trail\n        draw_line(Vector2.ZERO, Vector2(0, -10), Color.WHITE.with_alpha(0.3), 2)\n```\n\n### Optional: Upgrade Integration\nIf magnetism is an upgrade (from GoPit-28w), make range configurable:\n\n```gdscript\nstatic var global_magnetism_bonus: float = 0.0\n\nvar effective_range: float:\n    get:\n        return magnetism_range + global_magnetism_bonus * 100  # +100px per upgrade level\n```\n\n### Files to Modify\n1. MODIFY: `scripts/entities/gem.gd` - add magnetism physics","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:12:31.173714-06:00","created_by":"randroid","updated_at":"2026-01-05T02:44:25.832545-06:00","closed_at":"2026-01-05T02:44:25.832545-06:00","close_reason":"Implemented as part of magnetism upgrade in GoPit-28w"}
{"id":"GoPit-bs4","title":"Add screen shake and damage feedback","description":"## Problem\nWhen balls hit enemies and when player takes damage, feedback is minimal. Hits don't feel impactful.\n\n## Implementation Plan\n\n### Phase 1: Screen Shake System\n**File: `scripts/effects/camera_shake.gd`** (new)\n\n```gdscript\nextends Camera2D\n\nvar shake_intensity: float = 0.0\nvar shake_decay: float = 5.0\n\nfunc _process(delta):\n    if shake_intensity \u003e 0:\n        offset = Vector2(\n            randf_range(-shake_intensity, shake_intensity),\n            randf_range(-shake_intensity, shake_intensity)\n        )\n        shake_intensity = lerp(shake_intensity, 0.0, shake_decay * delta)\n    else:\n        offset = Vector2.ZERO\n\nfunc shake(intensity: float = 10.0, decay: float = 5.0):\n    shake_intensity = max(shake_intensity, intensity)\n    shake_decay = decay\n```\n\n### Phase 2: Damage Vignette Effect\n**File: `scripts/effects/damage_vignette.gd`** (new)\n\n```gdscript\nextends ColorRect\n\nvar flash_duration: float = 0.15\nvar flash_timer: float = 0.0\n\nfunc _ready():\n    color = Color(1, 0, 0, 0)  # Transparent red\n    mouse_filter = Control.MOUSE_FILTER_IGNORE\n\nfunc flash():\n    flash_timer = flash_duration\n    \nfunc _process(delta):\n    if flash_timer \u003e 0:\n        flash_timer -= delta\n        color.a = (flash_timer / flash_duration) * 0.4\n    else:\n        color.a = 0\n```\n\n### Phase 3: Hit Particles\n**File: `scenes/effects/hit_particles.tscn`** (new)\n\nUse GPUParticles2D with:\n- Burst emission (8-12 particles)\n- Spread angle: 180 degrees (radial)\n- Initial velocity: 100-200\n- Gravity: 0\n- Lifetime: 0.3s\n- Color: Enemy color with fade out\n\n### Phase 4: Floating Damage Numbers\n**File: `scripts/effects/damage_number.gd`** (new)\n\n```gdscript\nextends Label\n\nfunc _ready():\n    var tween = create_tween()\n    tween.tween_property(self, \"position:y\", position.y - 50, 0.5)\n    tween.parallel().tween_property(self, \"modulate:a\", 0.0, 0.5)\n    tween.tween_callback(queue_free)\n\nstatic func spawn(parent: Node, pos: Vector2, damage: int):\n    var label = preload(\"res://scenes/effects/damage_number.tscn\").instantiate()\n    label.text = str(damage)\n    label.position = pos\n    parent.add_child(label)\n```\n\n### Phase 5: Wire Up Effects\n**Modify: `scripts/entities/enemies/enemy_base.gd`**\n\n```gdscript\nfunc take_damage(amount: int) -\u003e void:\n    hp -= amount\n    \n    # Screen shake (small)\n    CameraShake.shake(3.0)\n    \n    # Spawn hit particles\n    var particles = preload(\"hit_particles.tscn\").instantiate()\n    particles.position = global_position\n    get_tree().current_scene.add_child(particles)\n    \n    # Floating damage number\n    DamageNumber.spawn(get_tree().current_scene, global_position, amount)\n    \n    # Existing flash effect...\n```\n\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\nsignal player_damaged(amount: int)\n\nfunc take_damage(amount: int) -\u003e void:\n    player_hp = max(0, player_hp - amount)\n    player_damaged.emit(amount)\n    \n    # Trigger big screen shake\n    CameraShake.shake(15.0, 3.0)\n```\n\n### Files to Create/Modify\n1. NEW: `scripts/effects/camera_shake.gd` (autoload or attached to Camera2D)\n2. NEW: `scripts/effects/damage_vignette.gd`\n3. NEW: `scenes/effects/hit_particles.tscn`\n4. NEW: `scenes/effects/damage_number.tscn`\n5. NEW: `scripts/effects/damage_number.gd`\n6. MODIFY: `scenes/game.tscn` - add Camera2D with shake, vignette ColorRect\n7. MODIFY: `scripts/entities/enemies/enemy_base.gd` - trigger effects\n8. MODIFY: `scripts/autoload/game_manager.gd` - emit player_damaged signal\n\n### Testing\n- Verify screen shake on enemy hit (small) and player damage (large)\n- Verify vignette flash on player damage\n- Verify particles spawn at hit location\n- Verify damage numbers float up and fade","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T01:48:08.29361-06:00","created_by":"randroid","updated_at":"2026-01-05T02:28:42.963706-06:00","closed_at":"2026-01-05T02:28:42.963706-06:00","close_reason":"Implemented screen shake, damage vignette, hit particles, and floating damage numbers"}
{"id":"GoPit-bxg","title":"Add additional enemy types (Bat, Crab)","description":"## Problem\nOnly slimes exist. Gameplay becomes repetitive.\n\n## Implementation Plan\n\n### Enemy Type: Bat\n**File: `scripts/entities/enemies/bat.gd`** (new)\n\n```gdscript\nextends EnemyBase\n## Bat enemy - zigzags horizontally while descending\n\n@export var zigzag_frequency: float = 2.0  # oscillations per second\n@export var zigzag_amplitude: float = 100.0  # pixels left/right\n\nvar time_alive: float = 0.0\nvar start_x: float = 0.0\n\nfunc _ready():\n    super._ready()\n    start_x = global_position.x\n    max_hp = 8  # Slightly weaker\n    speed = 150  # Faster descent\n    xp_value = 12\n\nfunc _physics_process(delta):\n    time_alive += delta\n    \n    # Zigzag motion\n    var offset = sin(time_alive * zigzag_frequency * TAU) * zigzag_amplitude\n    global_position.x = start_x + offset\n    \n    # Descend\n    velocity = Vector2(0, speed)\n    move_and_slide()\n\nfunc _draw():\n    # Purple bat shape\n    draw_circle(Vector2.ZERO, 10, Color(0.6, 0.3, 0.8))\n    # Wings\n    draw_polygon([Vector2(-20, 0), Vector2(-10, -8), Vector2(-5, 0)], [Color(0.5, 0.2, 0.7)])\n    draw_polygon([Vector2(20, 0), Vector2(10, -8), Vector2(5, 0)], [Color(0.5, 0.2, 0.7)])\n```\n\n### Enemy Type: Crab\n**File: `scripts/entities/enemies/crab.gd`** (new)\n\n```gdscript\nextends EnemyBase\n## Crab enemy - moves side to side, tanky\n\n@export var horizontal_speed: float = 80.0\n@export var pause_duration: float = 0.5\n\nvar horizontal_direction: int = 1\nvar pause_timer: float = 0.0\nconst MARGIN: float = 60.0\n\nfunc _ready():\n    super._ready()\n    max_hp = 25  # Tanky\n    hp = max_hp\n    speed = 50  # Slow descent\n    xp_value = 20\n    horizontal_direction = 1 if randf() \u003e 0.5 else -1\n\nfunc _physics_process(delta):\n    if pause_timer \u003e 0:\n        pause_timer -= delta\n        return\n    \n    # Horizontal movement\n    global_position.x += horizontal_direction * horizontal_speed * delta\n    \n    # Bounce off edges\n    if global_position.x \u003c MARGIN:\n        horizontal_direction = 1\n        pause_timer = pause_duration\n    elif global_position.x \u003e 720 - MARGIN:\n        horizontal_direction = -1\n        pause_timer = pause_duration\n    \n    # Slow descent\n    velocity = Vector2(0, speed)\n    move_and_slide()\n\nfunc _draw():\n    # Orange crab shape\n    draw_circle(Vector2.ZERO, 15, Color(0.9, 0.4, 0.2))\n    # Claws\n    draw_circle(Vector2(-18, 0), 6, Color(0.8, 0.3, 0.1))\n    draw_circle(Vector2(18, 0), 6, Color(0.8, 0.3, 0.1))\n```\n\n### Spawner Integration\n**Modify: `scripts/entities/enemies/enemy_spawner.gd`**\n\n```gdscript\nvar bat_scene = preload(\"res://scenes/entities/enemies/bat.tscn\")\nvar crab_scene = preload(\"res://scenes/entities/enemies/crab.tscn\")\n\nconst ENEMY_WEIGHTS := {\n    \"slime\": 60,  # 60% chance\n    \"bat\": 25,    # 25% chance\n    \"crab\": 15    # 15% chance\n}\n\nfunc _spawn_enemy():\n    var enemy_type = _weighted_random_enemy()\n    var enemy: EnemyBase\n    \n    match enemy_type:\n        \"slime\":\n            enemy = slime_scene.instantiate()\n        \"bat\":\n            enemy = bat_scene.instantiate()\n        \"crab\":\n            enemy = crab_scene.instantiate()\n    \n    # Apply wave scaling and spawn...\n\nfunc _weighted_random_enemy() -\u003e String:\n    var total = 0\n    for weight in ENEMY_WEIGHTS.values():\n        total += weight\n    \n    var roll = randi() % total\n    var cumulative = 0\n    \n    for enemy_type in ENEMY_WEIGHTS:\n        cumulative += ENEMY_WEIGHTS[enemy_type]\n        if roll \u003c cumulative:\n            return enemy_type\n    \n    return \"slime\"\n```\n\n### Scene Files\nCreate matching .tscn files for each new enemy.\n\n### Files to Create/Modify\n1. NEW: `scenes/entities/enemies/bat.tscn`\n2. NEW: `scripts/entities/enemies/bat.gd`\n3. NEW: `scenes/entities/enemies/crab.tscn`\n4. NEW: `scripts/entities/enemies/crab.gd`\n5. MODIFY: `scripts/entities/enemies/enemy_spawner.gd` - spawn variety","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T02:15:32.724693-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.525001-06:00","closed_at":"2026-01-05T10:31:02.525001-06:00","close_reason":"Closed"}
{"id":"GoPit-dlt","title":"Win Condition \u0026 Stage Progression","description":"# Win Condition \u0026 Stage Progression\n\n## Parent Epic\nGoPit-6p4 (Phase 3 - Boss \u0026 Stages)\n\n## Overview\nImplement level-based win condition where defeating the final boss completes the game.\n\n## Requirements\n1. Game ends in victory when final boss defeated\n2. Stage transitions between biomes\n3. Victory screen with stats\n4. Option to continue in endless mode after win\n5. Track completion statistics\n\n## Stage Flow\n```\nStart ‚Üí The Pit (W1-30) ‚Üí Boss ‚Üí Frozen Depths (W31-60) ‚Üí Boss ‚Üí ...\n                                                              ‚Üì\n                                      Final Descent (W91-100) ‚Üí Final Boss ‚Üí VICTORY\n```\n\n## Victory Handling\n```gdscript\n# game_manager.gd additions\nsignal game_victory\n\nfunc trigger_victory() -\u003e void:\n    current_state = GameState.VICTORY\n    _save_completion_stats()\n    game_victory.emit()\n\n# victory_screen.gd\nfunc _show_stats() -\u003e void:\n    # Time survived\n    # Enemies killed\n    # Balls fired\n    # Final level\n    # Balls evolved\n    # Option: Continue in Endless Mode\n```\n\n## Implementation\n- Modify wave progression to check for stage completion\n- Add victory state to GameManager\n- Create victory screen UI\n- Save completion to persistent storage\n\n## Acceptance Criteria\n- [ ] Beating final boss triggers victory\n- [ ] Victory screen shows run stats\n- [ ] Can continue to endless mode after win\n- [ ] Completion tracked in save data\n- [ ] Stage transitions work correctly","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:37:53.624766-06:00","created_by":"randroid","updated_at":"2026-01-05T23:37:53.624766-06:00","dependencies":[{"issue_id":"GoPit-dlt","depends_on_id":"GoPit-6wd","type":"blocks","created_at":"2026-01-05T23:40:33.448248-06:00","created_by":"randroid"}]}
{"id":"GoPit-e50","title":"Create PlayerZone Area2D at screen bottom","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:59.815291-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.242512-06:00","closed_at":"2026-01-04T23:58:36.242512-06:00","close_reason":"Closed"}
{"id":"GoPit-e7y","title":"Gem Collection via Player Movement","description":"# Gem Collection via Player Movement\n\n## Parent Epic\nGoPit-3ky (Phase 1 - Core Alignment)\n\n## Overview\nChange gem collection from \"enter player zone area\" to \"player walks over gem\", with magnetism upgrade pulling gems toward player.\n\n## Current State\n- gem.gd: Gems are Area2D on collision layer 8\n- Gems collected when entering player_zone (Area2D at bottom)\n- game_controller.gd: _on_player_zone_area_entered() handles collection\n- GameManager.gem_magnetism_range exists but gems don't move to player\n- Gems despawn after ~15 seconds\n\n## Requirements\n1. Gems only collected when player touches them directly\n2. Remove automatic collection at player zone wall\n3. Magnetism upgrade: gems within range move toward player\n4. Gems still despawn if not collected (10 seconds)\n5. Visual \"pull\" effect when magnetism active\n\n## Implementation Approach\n\n### Step 1: Update gem.gd for Player Detection\n```gdscript\n# gem.gd modifications\n\nvar _player: Node2D = null\nvar _being_attracted: bool = false\nconst ATTRACTION_SPEED: float = 400.0\n\nfunc _ready() -\u003e void:\n    # ... existing code ...\n    # Find player reference\n    _player = get_tree().get_first_node_in_group(\"player\")\n    \n    # Set collision to detect player (not player_zone)\n    collision_layer = 8  # gems\n    collision_mask = 16  # player\n\nfunc _physics_process(delta: float) -\u003e void:\n    _check_magnetism(delta)\n    _check_player_collision()\n\nfunc _check_magnetism(delta: float) -\u003e void:\n    if not _player:\n        return\n    \n    var mag_range := GameManager.gem_magnetism_range\n    if mag_range \u003c= 0:\n        return\n    \n    var distance := global_position.distance_to(_player.global_position)\n    if distance \u003c mag_range:\n        _being_attracted = true\n        var direction := (_player.global_position - global_position).normalized()\n        # Move faster as gem gets closer\n        var speed := ATTRACTION_SPEED * (1.0 + (mag_range - distance) / mag_range)\n        position += direction * speed * delta\n    else:\n        _being_attracted = false\n\nfunc _check_player_collision() -\u003e void:\n    if not _player:\n        return\n    \n    var distance := global_position.distance_to(_player.global_position)\n    if distance \u003c 25:  # Collection radius\n        _collect()\n\nfunc _collect() -\u003e void:\n    collected.emit(self)\n    SoundManager.play(SoundManager.SoundType.GEM_COLLECT)\n    queue_free()\n```\n\n### Step 2: Remove Player Zone Collection\nIn game_controller.gd, modify or remove:\n```gdscript\nfunc _on_player_zone_area_entered(area: Area2D) -\u003e void:\n    # OLD: Collect gems that enter zone\n    # NEW: Only handle enemies here, gems collected by player directly\n    \n    # Remove gem collection logic from here\n    # Gems now handle their own collection via player contact\n    pass\n```\n\n### Step 3: Visual Magnetism Effect\nWhen gem is being attracted, show pull line:\n```gdscript\nfunc _draw() -\u003e void:\n    # Draw gem sprite\n    draw_circle(Vector2.ZERO, 8, Color(0.2, 0.9, 0.3))\n    \n    # Draw attraction line when being pulled\n    if _being_attracted and _player:\n        var to_player := _player.global_position - global_position\n        draw_line(Vector2.ZERO, to_player, Color(0.5, 1.0, 0.5, 0.3), 2.0)\n\nfunc _physics_process(delta: float) -\u003e void:\n    # ... existing code ...\n    if _being_attracted:\n        queue_redraw()\n```\n\n### Step 4: Ensure Player Has Collision\nPlayer needs to be in group \"player\" and have collision layer 16:\n```gdscript\n# In player.gd _ready()\nadd_to_group(\"player\")\ncollision_layer = 16\ncollision_mask = 4 | 8  # enemies + gems\n```\n\n### Step 5: Update Magnetism Upgrade\nIn level_up_overlay.gd, _apply_magnetism() already increases range:\n```gdscript\nfunc _apply_magnetism() -\u003e void:\n    GameManager.gem_magnetism_range += 200.0\n```\nThis should work with the new system.\n\n## Files to Modify\n- MODIFY: scripts/entities/gem.gd (major changes)\n- MODIFY: scripts/game/game_controller.gd (remove zone collection)\n- MODIFY: scripts/entities/player.gd (ensure collision setup)\n- Verify: scripts/ui/level_up_overlay.gd (magnetism upgrade)\n\n## Testing\n```python\nasync def test_gem_not_collected_at_wall(game):\n    \"\"\"Gems should NOT auto-collect when reaching bottom wall\"\"\"\n    # Spawn gem at top, let it fall to bottom\n    # Verify it's still there (not collected)\n    pass\n\nasync def test_gem_collected_on_player_contact(game):\n    \"\"\"Gems collected when player touches them\"\"\"\n    # Spawn gem\n    # Move player to gem position\n    # Verify gem collected and XP gained\n    pass\n\nasync def test_gem_magnetism(game):\n    \"\"\"Gems move toward player when magnetism upgrade active\"\"\"\n    # Apply magnetism upgrade\n    # Spawn gem within range\n    # Verify gem moves toward player\n    pass\n\nasync def test_gem_despawn(game):\n    \"\"\"Gems despawn after timeout if not collected\"\"\"\n    # Spawn gem, don't collect\n    # Wait 10+ seconds\n    # Verify gem is gone\n    pass\n```\n\n## Acceptance Criteria\n- [ ] Gems do NOT auto-collect at screen bottom\n- [ ] Gems collected when player character touches them\n- [ ] Magnetism upgrade causes gems to move toward player\n- [ ] Gems within magnetism range show visual pull effect\n- [ ] Gems despawn after ~10 seconds if not collected\n- [ ] XP correctly awarded on collection\n- [ ] Gem collection sound plays on pickup\n\n## Design Notes\n- This encourages player to move and engage\n- Risk/reward: move toward gems but expose yourself\n- Magnetism becomes more valuable upgrade\n- Consider: gem value could decay over time?","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-05T23:21:41.022741-06:00","created_by":"randroid","updated_at":"2026-01-05T23:21:41.022741-06:00"}
{"id":"GoPit-enn","title":"Epic 1: Project Foundation","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:13:47.558652-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.239341-06:00","closed_at":"2026-01-04T23:58:36.239341-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-enn","depends_on_id":"GoPit-y92","type":"blocks","created_at":"2026-01-04T23:17:20.40572-06:00","created_by":"randroid"},{"issue_id":"GoPit-enn","depends_on_id":"GoPit-6he","type":"blocks","created_at":"2026-01-04T23:17:20.467427-06:00","created_by":"randroid"},{"issue_id":"GoPit-enn","depends_on_id":"GoPit-9gy","type":"blocks","created_at":"2026-01-04T23:17:20.528016-06:00","created_by":"randroid"},{"issue_id":"GoPit-enn","depends_on_id":"GoPit-1db","type":"blocks","created_at":"2026-01-04T23:17:20.591473-06:00","created_by":"randroid"}]}
{"id":"GoPit-exe","title":"Create EnemySpawner (Timer-based, random X position)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:45.90123-06:00","created_by":"randroid","updated_at":"2026-01-04T23:51:41.18102-06:00","closed_at":"2026-01-04T23:51:41.18102-06:00","close_reason":"Closed"}
{"id":"GoPit-ihf","title":"Status Effect System","description":"# Status Effect System\n\n## Parent Epic\nGoPit-zxr (Phase 2 - Ball Evolution System)\n\n## Overview\nImplement a robust status effect system with 6 base effects that can be applied by balls and potentially combined.\n\n## Current State\n- ball.gd has BallType enum: NORMAL, FIRE, ICE, LIGHTNING\n- _apply_ball_type_effect() has basic implementations\n- Fire: visual tint only\n- Ice: 50% slow for 1.5s\n- Lightning: chain to 1 nearby enemy\n- No formal status effect tracking on enemies\n\n## Target Status Effects\n| Effect | Damage | Duration | Visual | Special |\n|--------|--------|----------|--------|---------|\n| Burn | 5/sec | 3s | Orange particles | Stacks refresh |\n| Freeze | 0 | 2s | Ice crystals | 50% slow |\n| Poison | 3/sec | 5s | Green bubbles | Spreads on death |\n| Bleed | 2/sec | ‚àû | Red drips | Stacks up to 5x |\n| Lightning | 0 | instant | Electric arc | Chain to 2 enemies |\n| Iron | 0 | instant | None | +50% dmg, knockback |\n\n## Requirements\n1. StatusEffect base class for consistent behavior\n2. Enemies can have multiple effects simultaneously\n3. Effects have visual indicators on affected enemies\n4. DoT effects tick at consistent intervals\n5. Effect stacking rules (refresh vs stack)\n6. Effect spreading (Poison on death)\n\n## Implementation Approach\n\n### Step 1: Create StatusEffect Base Class\n```gdscript\n# scripts/effects/status_effect.gd\nclass_name StatusEffect\nextends RefCounted\n\nenum Type { BURN, FREEZE, POISON, BLEED, LIGHTNING, IRON }\n\nvar type: Type\nvar duration: float\nvar damage_per_tick: float\nvar tick_interval: float = 0.5\nvar stacks: int = 1\nvar max_stacks: int = 1\nvar source: Node2D  # Ball that applied this\n\nvar _time_remaining: float\nvar _tick_timer: float\n\nfunc _init(effect_type: Type) -\u003e void:\n    type = effect_type\n    _configure_by_type()\n\nfunc _configure_by_type() -\u003e void:\n    match type:\n        Type.BURN:\n            duration = 3.0\n            damage_per_tick = 2.5  # 5 dps\n            max_stacks = 1  # Refreshes duration\n        Type.FREEZE:\n            duration = 2.0\n            damage_per_tick = 0\n        Type.POISON:\n            duration = 5.0\n            damage_per_tick = 1.5  # 3 dps\n            max_stacks = 1\n        Type.BLEED:\n            duration = INF  # Permanent until cleared\n            damage_per_tick = 1.0  # 2 dps per stack\n            max_stacks = 5\n        Type.LIGHTNING:\n            duration = 0  # Instant\n        Type.IRON:\n            duration = 0  # Instant\n\nfunc apply(enemy: EnemyBase) -\u003e void:\n    _time_remaining = duration\n    _tick_timer = 0\n    _on_apply(enemy)\n\nfunc update(delta: float, enemy: EnemyBase) -\u003e bool:\n    \"\"\"Returns true if effect should continue, false if expired\"\"\"\n    if duration \u003c= 0:\n        return false  # Instant effects don't persist\n    \n    _time_remaining -= delta\n    _tick_timer += delta\n    \n    if _tick_timer \u003e= tick_interval:\n        _tick_timer = 0\n        _on_tick(enemy)\n    \n    return _time_remaining \u003e 0\n\nfunc _on_apply(enemy: EnemyBase) -\u003e void:\n    match type:\n        Type.FREEZE:\n            enemy.apply_slow(0.5, duration)\n        Type.IRON:\n            # Knockback handled by ball collision\n\nfunc _on_tick(enemy: EnemyBase) -\u003e void:\n    if damage_per_tick \u003e 0:\n        var total_damage := int(damage_per_tick * stacks)\n        enemy.take_damage(total_damage)\n\nfunc _on_expire(enemy: EnemyBase) -\u003e void:\n    match type:\n        Type.POISON:\n            _spread_poison(enemy)\n\nfunc _spread_poison(enemy: EnemyBase) -\u003e void:\n    # Find nearby enemies and apply poison\n    pass\n\nfunc add_stack() -\u003e void:\n    stacks = mini(stacks + 1, max_stacks)\n\nfunc refresh() -\u003e void:\n    _time_remaining = duration\n```\n\n### Step 2: Add Effect Manager to EnemyBase\n```gdscript\n# In enemy_base.gd\nvar _active_effects: Array[StatusEffect] = []\n\nfunc apply_status_effect(effect: StatusEffect) -\u003e void:\n    # Check for existing effect of same type\n    for existing in _active_effects:\n        if existing.type == effect.type:\n            if effect.max_stacks \u003e 1:\n                existing.add_stack()\n            else:\n                existing.refresh()\n            return\n    \n    # New effect\n    effect.apply(self)\n    _active_effects.append(effect)\n    _update_effect_visuals()\n\nfunc _process_effects(delta: float) -\u003e void:\n    var expired: Array[StatusEffect] = []\n    \n    for effect in _active_effects:\n        if not effect.update(delta, self):\n            effect._on_expire(self)\n            expired.append(effect)\n    \n    for effect in expired:\n        _active_effects.erase(effect)\n    \n    if expired.size() \u003e 0:\n        _update_effect_visuals()\n\nfunc _physics_process(delta: float) -\u003e void:\n    _process_effects(delta)\n    # ... existing movement code ...\n```\n\n### Step 3: Visual Effect Indicators\n```gdscript\nfunc _update_effect_visuals() -\u003e void:\n    # Show icons/particles for active effects\n    for effect in _active_effects:\n        match effect.type:\n            StatusEffect.Type.BURN:\n                _show_burn_particles()\n            StatusEffect.Type.FREEZE:\n                modulate = Color(0.7, 0.9, 1.2)\n            StatusEffect.Type.POISON:\n                _show_poison_bubbles()\n            StatusEffect.Type.BLEED:\n                _show_bleed_drips(effect.stacks)\n```\n\n### Step 4: Update ball.gd to Use Effects\n```gdscript\nfunc _apply_ball_type_effect(enemy: Node2D, _base_damage: int) -\u003e void:\n    if not enemy is EnemyBase:\n        return\n    \n    var effect: StatusEffect = null\n    \n    match ball_type:\n        BallType.FIRE:\n            effect = StatusEffect.new(StatusEffect.Type.BURN)\n        BallType.ICE:\n            effect = StatusEffect.new(StatusEffect.Type.FREEZE)\n        BallType.LIGHTNING:\n            _chain_lightning(enemy)  # Instant, no persist\n        # Add more as implemented\n    \n    if effect:\n        enemy.apply_status_effect(effect)\n```\n\n## Files to Create/Modify\n- NEW: scripts/effects/status_effect.gd\n- MODIFY: scripts/entities/enemies/enemy_base.gd\n- MODIFY: scripts/entities/ball.gd\n- NEW: scenes/effects/burn_particles.tscn\n- NEW: scenes/effects/poison_bubbles.tscn\n\n## Testing\n```python\nasync def test_burn_deals_damage_over_time(game):\n    \"\"\"Burn effect should tick damage\"\"\"\n    # Apply burn to enemy, track HP over 3 seconds\n    pass\n\nasync def test_freeze_slows_enemy(game):\n    \"\"\"Freeze should reduce enemy speed\"\"\"\n    pass\n\nasync def test_bleed_stacks(game):\n    \"\"\"Bleed should stack up to 5x\"\"\"\n    pass\n\nasync def test_poison_spreads_on_death(game):\n    \"\"\"Poison should spread to nearby enemies on death\"\"\"\n    pass\n```\n\n## Acceptance Criteria\n- [ ] 6 status effects implemented\n- [ ] DoT effects tick damage correctly\n- [ ] Freeze slows enemy movement\n- [ ] Bleed stacks up to 5x\n- [ ] Poison spreads on enemy death\n- [ ] Lightning chains to nearby enemies\n- [ ] Visual indicators for each effect\n- [ ] Multiple effects can be active simultaneously","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T23:24:59.406832-06:00","created_by":"randroid","updated_at":"2026-01-05T23:24:59.406832-06:00"}
{"id":"GoPit-itz","title":"Add wave counter, increment on enemy batch cleared","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:16:28.704941-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.995215-06:00","closed_at":"2026-01-05T00:01:32.995215-06:00","close_reason":"Closed"}
{"id":"GoPit-ivv","title":"EPIC: Phase 4 - Character System","description":"# Phase 4: Multiple Playable Characters\n\n## Overview\nImplement character selection with unique starting balls, stats, and passive abilities.\n\n## Success Criteria\n- [ ] Character selection screen before game start\n- [ ] 6 unique characters implemented\n- [ ] Each character has unique starting ball\n- [ ] Character stats affect gameplay (HP, damage, speed, etc)\n- [ ] Character-specific passive abilities\n\n## Reference\n- [Ball x Pit Characters](https://store.steampowered.com/app/2062430/BALL_x_PIT/)\n- [GDD.md Section 4.2](./GDD.md#42-characters-new)\n\n## Technical Context\nCurrent state:\n- Single implicit \"player\" with fixed stats\n- game_manager.gd has player_hp, max_hp\n- ball_spawner.gd has ball_damage, ball_speed\n- No character selection exists\n\n## Character Roster\n\n| Character | Starting Ball | Passive | Stats Focus |\n|-----------|---------------|---------|-------------|\n| Rookie | Basic | None | Balanced |\n| Pyro | Burn | +20% fire damage | Strength |\n| Frost Mage | Freeze | Frozen +50% dmg | Intelligence |\n| Tactician | Iron | +2 baby balls | Leadership |\n| Gambler | Random | 3x crit damage | Dexterity |\n| Vampire | Bleed | Lifesteal | Endurance |\n\n## Stat System\n- Endurance: Max HP (base 100)\n- Strength: Ball damage multiplier\n- Leadership: Baby ball count/rate\n- Speed: Movement velocity\n- Dexterity: Crit chance\n- Intelligence: Status effect duration\n\n## Implementation Approach\n1. Create Character resource type\n2. Character selection scene\n3. GameManager loads selected character\n4. Stats applied to relevant systems\n\n## Child Tasks\n1. Character Resource \u0026 Data\n2. Character Selection UI\n3. Stat System Integration\n4. Implement 6 Characters\n5. Character Unlock System\n\n## Dependencies\n- Depends on Phase 1 (baby balls for Tactician)\n- Depends on Phase 2 (status effects for starting balls)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-05T23:19:25.524139-06:00","created_by":"randroid","updated_at":"2026-01-05T23:19:25.524139-06:00","dependencies":[{"issue_id":"GoPit-ivv","depends_on_id":"GoPit-veq","type":"blocks","created_at":"2026-01-05T23:42:46.349672-06:00","created_by":"randroid"},{"issue_id":"GoPit-ivv","depends_on_id":"GoPit-z2q","type":"blocks","created_at":"2026-01-05T23:42:46.39873-06:00","created_by":"randroid"},{"issue_id":"GoPit-ivv","depends_on_id":"GoPit-3ky","type":"blocks","created_at":"2026-01-05T23:42:46.495137-06:00","created_by":"randroid"},{"issue_id":"GoPit-ivv","depends_on_id":"GoPit-zxr","type":"blocks","created_at":"2026-01-05T23:42:46.543397-06:00","created_by":"randroid"}]}
{"id":"GoPit-jiv","title":"Baby Ball Auto-Generation System","description":"# Baby Ball Auto-Generation System\n\n## Parent Epic\nGoPit-3ky (Phase 1 - Core Alignment)\n\n## Overview\nImplement passive baby ball generation - small balls that automatically spawn and fire at enemies, providing base DPS.\n\n## Current State\n- ball.gd handles regular ball behavior\n- ball_spawner.gd fires balls on command\n- No passive/automatic ball generation exists\n- GameManager has no \"Leadership\" stat for baby ball rate\n\n## BallxPit Reference\nIn BallxPit:\n- Player generates \"child balls\" automatically\n- Baby balls are smaller, deal less damage\n- \"Leadership\" stat affects generation rate\n- Some characters (Tactician) specialize in baby balls\n- Baby balls fire in aimed direction or at nearest enemy\n\n## Requirements\n1. Baby balls spawn automatically on timer\n2. Baby balls are visually smaller than regular balls\n3. Baby balls deal reduced damage (50% of regular)\n4. Fire direction: toward nearest enemy (or aimed direction)\n5. Generation rate affected by \"Leadership\" stat\n6. Base rate: 1 baby ball every 2 seconds\n7. Baby balls share physics with regular balls (bounce, etc.)\n\n## Implementation Approach\n\n### Step 1: Add Baby Ball Spawner\nCreate new script: scripts/entities/baby_ball_spawner.gd\n```gdscript\nclass_name BabyBallSpawner\nextends Node2D\n\nsignal baby_ball_spawned(ball: Node2D)\n\n@export var ball_scene: PackedScene\n@export var base_spawn_interval: float = 2.0\n@export var baby_ball_damage_multiplier: float = 0.5\n@export var baby_ball_scale: float = 0.6\n\nvar _spawn_timer: Timer\nvar _player: Node2D\nvar _balls_container: Node2D\n\n# Leadership stat affects spawn rate\nvar leadership_bonus: float = 0.0\n\nfunc _ready() -\u003e void:\n    _setup_timer()\n    _player = get_tree().get_first_node_in_group(\"player\")\n    \nfunc _setup_timer() -\u003e void:\n    _spawn_timer = Timer.new()\n    _spawn_timer.one_shot = false\n    _spawn_timer.timeout.connect(_spawn_baby_ball)\n    add_child(_spawn_timer)\n    \nfunc start() -\u003e void:\n    _update_spawn_rate()\n    _spawn_timer.start()\n    \nfunc stop() -\u003e void:\n    _spawn_timer.stop()\n\nfunc set_leadership(value: float) -\u003e void:\n    leadership_bonus = value\n    _update_spawn_rate()\n\nfunc _update_spawn_rate() -\u003e void:\n    # Higher leadership = faster spawns\n    # leadership_bonus of 1.0 = 2x spawn rate\n    var rate := base_spawn_interval / (1.0 + leadership_bonus)\n    _spawn_timer.wait_time = max(0.3, rate)\n\nfunc _spawn_baby_ball() -\u003e void:\n    if not _player or not ball_scene:\n        return\n    \n    var ball := ball_scene.instantiate()\n    ball.position = _player.global_position\n    ball.scale = Vector2(baby_ball_scale, baby_ball_scale)\n    ball.damage = int(ball.damage * baby_ball_damage_multiplier)\n    \n    # Set direction toward nearest enemy\n    var direction := _get_target_direction()\n    ball.set_direction(direction)\n    \n    if _balls_container:\n        _balls_container.add_child(ball)\n    else:\n        get_parent().add_child(ball)\n    \n    baby_ball_spawned.emit(ball)\n\nfunc _get_target_direction() -\u003e Vector2:\n    var nearest := _find_nearest_enemy()\n    if nearest:\n        return (_player.global_position.direction_to(nearest.global_position))\n    # Fallback: random upward direction\n    return Vector2(randf_range(-0.3, 0.3), -1.0).normalized()\n\nfunc _find_nearest_enemy() -\u003e Node2D:\n    var enemies_container := get_tree().get_first_node_in_group(\"enemies_container\")\n    if not enemies_container:\n        return null\n    \n    var nearest: Node2D = null\n    var nearest_dist: float = INF\n    \n    for enemy in enemies_container.get_children():\n        if enemy is EnemyBase:\n            var dist: float = _player.global_position.distance_to(enemy.global_position)\n            if dist \u003c nearest_dist:\n                nearest_dist = dist\n                nearest = enemy\n    \n    return nearest\n```\n\n### Step 2: Visual Distinction\nBaby balls should look different:\n```gdscript\n# In ball.gd, add baby ball visual\nvar is_baby_ball: bool = false\n\nfunc _draw() -\u003e void:\n    if is_baby_ball:\n        # Smaller, different color tint\n        draw_circle(Vector2.ZERO, radius * 0.6, ball_color.lightened(0.3))\n        # Trail is shorter\n    else:\n        # Normal ball drawing\n        draw_circle(Vector2.ZERO, radius, ball_color)\n```\n\n### Step 3: Integrate with game_controller.gd\n```gdscript\n@onready var baby_ball_spawner: BabyBallSpawner = $GameArea/BabyBallSpawner\n\nfunc _on_game_started() -\u003e void:\n    # ... existing code ...\n    if baby_ball_spawner:\n        baby_ball_spawner._balls_container = balls_container\n        baby_ball_spawner.start()\n\nfunc _on_game_over() -\u003e void:\n    # ... existing code ...\n    if baby_ball_spawner:\n        baby_ball_spawner.stop()\n```\n\n### Step 4: Add to GameManager\n```gdscript\n# In game_manager.gd\nvar leadership: float = 0.0\n\nfunc add_leadership(amount: float) -\u003e void:\n    leadership += amount\n    # Notify baby ball spawner\n    var spawner := get_tree().get_first_node_in_group(\"baby_ball_spawner\")\n    if spawner:\n        spawner.set_leadership(leadership)\n```\n\n### Step 5: Add Leadership Upgrade\nIn level_up_overlay.gd:\n```gdscript\nUpgradeType.LEADERSHIP: {\n    \"name\": \"Leadership\",\n    \"description\": \"+1 Baby Ball rate\",\n    \"apply\": \"_apply_leadership\",\n    \"max_stacks\": 5\n}\n\nfunc _apply_leadership() -\u003e void:\n    GameManager.add_leadership(0.2)  # 20% faster baby balls per stack\n```\n\n## Files to Create/Modify\n- NEW: scripts/entities/baby_ball_spawner.gd\n- NEW: scenes/entities/baby_ball_spawner.tscn\n- MODIFY: scripts/game/game_controller.gd\n- MODIFY: scripts/autoload/game_manager.gd (add leadership)\n- MODIFY: scripts/ui/level_up_overlay.gd (add leadership upgrade)\n- MODIFY: scripts/entities/ball.gd (baby ball visual)\n\n## Testing\n```python\nasync def test_baby_balls_spawn_automatically(game):\n    \"\"\"Baby balls should spawn without player input\"\"\"\n    balls = \"/root/Game/GameArea/Balls\"\n    \n    # Don't fire manually, just wait\n    initial = await game.call(balls, \"get_child_count\")\n    await asyncio.sleep(3.0)  # Wait for 1-2 baby balls\n    final = await game.call(balls, \"get_child_count\")\n    \n    assert final \u003e initial, \"Baby balls should auto-spawn\"\n\nasync def test_baby_balls_target_enemies(game):\n    \"\"\"Baby balls should fire toward nearest enemy\"\"\"\n    # Spawn enemy at known position\n    # Wait for baby ball\n    # Check ball direction points toward enemy\n    pass\n\nasync def test_leadership_affects_spawn_rate(game):\n    \"\"\"Higher leadership = more baby balls\"\"\"\n    # Apply leadership upgrade multiple times\n    # Measure spawn rate\n    pass\n```\n\n## Acceptance Criteria\n- [ ] Baby balls spawn automatically every ~2 seconds\n- [ ] Baby balls are visually smaller than regular balls\n- [ ] Baby balls deal 50% damage\n- [ ] Baby balls fire toward nearest enemy\n- [ ] Leadership upgrade increases spawn rate\n- [ ] Baby balls follow same physics (bounce, despawn)\n- [ ] Sound plays on baby ball spawn (quieter than manual)\n\n## Dependencies\n- Requires Player Free Movement (baby balls spawn at player position)\n\n## Notes\n- Baby balls create constant base DPS\n- Frees player to focus on dodging\n- Leadership builds viable in later phases\n- Consider: baby balls could inherit ball type effects","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T23:21:41.301447-06:00","created_by":"randroid","updated_at":"2026-01-05T23:21:41.301447-06:00"}
{"id":"GoPit-k6s","title":"Add tutorial/onboarding overlay","description":"## Problem\nNew players have no guidance. Controls and objectives must be discovered through experimentation.\n\n## Implementation Plan\n\n### Approach: First-time overlay with step-by-step hints\n\n**File: `scripts/ui/tutorial_overlay.gd`** (new)\n\n```gdscript\nextends CanvasLayer\n\nenum TutorialStep { AIM, FIRE, HIT, COMPLETE }\nvar current_step: TutorialStep = TutorialStep.AIM\nvar has_completed_tutorial: bool = false\n\n@onready var hint_label: Label = $HintLabel\n@onready var highlight: Control = $Highlight\n\nfunc _ready():\n    has_completed_tutorial = _load_tutorial_state()\n    if has_completed_tutorial:\n        queue_free()\n        return\n    _show_step(TutorialStep.AIM)\n\nfunc _show_step(step: TutorialStep):\n    current_step = step\n    match step:\n        TutorialStep.AIM:\n            hint_label.text = \"Drag the joystick to AIM\"\n            _highlight_node(\"VirtualJoystick\")\n        TutorialStep.FIRE:\n            hint_label.text = \"Tap the button to FIRE!\"\n            _highlight_node(\"FireButton\")\n        TutorialStep.HIT:\n            hint_label.text = \"Hit enemies before they reach you!\"\n            _hide_highlight()\n        TutorialStep.COMPLETE:\n            _save_tutorial_complete()\n            _fade_out()\n\nfunc on_joystick_used():\n    if current_step == TutorialStep.AIM:\n        _show_step(TutorialStep.FIRE)\n\nfunc on_ball_fired():\n    if current_step == TutorialStep.FIRE:\n        _show_step(TutorialStep.HIT)\n\nfunc on_enemy_hit():\n    if current_step == TutorialStep.HIT:\n        _show_step(TutorialStep.COMPLETE)\n```\n\n### Visual Design\n- Semi-transparent dark overlay (0.3 alpha)\n- Cut-out highlight around target control\n- Large white text with drop shadow\n- Pulsing animation on highlighted element\n\n### Files to Create/Modify\n1. NEW: `scenes/ui/tutorial_overlay.tscn`\n2. NEW: `scripts/ui/tutorial_overlay.gd`\n3. MODIFY: `scripts/game/game_controller.gd` - emit tutorial events\n4. MODIFY: `scripts/input/virtual_joystick.gd` - notify on first use\n5. MODIFY: `scripts/entities/ball.gd` - notify on enemy hit\n\n### Persistence\nSave tutorial completion to `user://settings.save` so it only shows once.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T02:02:56.981642-06:00","created_by":"randroid","updated_at":"2026-01-05T02:30:47.580679-06:00","closed_at":"2026-01-05T02:30:47.580679-06:00","close_reason":"Implemented step-by-step tutorial overlay with highlights for joystick, fire button, and enemy hit"}
{"id":"GoPit-lu2","title":"Fusion Reactor Drops \u0026 Ball Fusion","description":"# Fusion Reactor Drops \u0026 Ball Fusion\n\n## Parent Epic\nGoPit-zxr (Phase 2 - Ball Evolution System)\n\n## Overview\nImplement Fusion Reactor item drops that allow combining two L3 balls into an evolved ball with combined properties.\n\n## Requirements\n1. Fusion Reactors drop from enemies (rare)\n2. Player collects reactor like a gem\n3. When collected with 2+ L3 balls: show fusion UI\n4. Fusion UI: select two L3 balls to combine\n5. Result: Evolved ball with both effects + bonus\n6. At least 5 fusion recipes implemented\n\n## Fusion Recipes\n| Ball A | Ball B | Result | Effect |\n|--------|--------|--------|--------|\n| Burn | Iron | **Bomb** | Explosion AoE on hit |\n| Freeze | Lightning | **Blizzard** | AoE freeze + chain |\n| Poison | Bleed | **Virus** | Spreading DoT + lifesteal |\n| Burn | Poison | **Magma** | DoT pools on ground |\n| Burn | Freeze | **Void** | Alternating effects |\n\n## Implementation Approach\n\n### Step 1: Create Fusion Reactor Drop\n```gdscript\n# scripts/entities/fusion_reactor.gd\nclass_name FusionReactor\nextends Area2D\n\nsignal collected\n\nfunc _ready() -\u003e void:\n    collision_layer = 32  # New layer for special pickups\n    collision_mask = 16   # Player\n    \n    body_entered.connect(_on_body_entered)\n\nfunc _on_body_entered(body: Node2D) -\u003e void:\n    if body.is_in_group(\"player\"):\n        collected.emit()\n        _trigger_fusion_ui()\n        queue_free()\n\nfunc _trigger_fusion_ui() -\u003e void:\n    var fusion_ready := BallRegistry.get_fusion_ready_balls()\n    if fusion_ready.size() \u003e= 2:\n        # Show fusion selection UI\n        GameManager.trigger_fusion_selection(fusion_ready)\n    else:\n        # Not enough L3 balls - store reactor for later?\n        # Or convert to random upgrade\n        pass\n```\n\n### Step 2: Fusion Recipes Registry\n```gdscript\n# scripts/autoload/fusion_registry.gd\nextends Node\n\nconst FUSION_RECIPES := {\n    # Key: sorted array of [BallType, BallType]\n    # Value: resulting evolved ball type\n    [BallRegistry.BallType.BURN, BallRegistry.BallType.IRON]: \"BOMB\",\n    [BallRegistry.BallType.FREEZE, BallRegistry.BallType.LIGHTNING]: \"BLIZZARD\",\n    [BallRegistry.BallType.POISON, BallRegistry.BallType.BLEED]: \"VIRUS\",\n    [BallRegistry.BallType.BURN, BallRegistry.BallType.POISON]: \"MAGMA\",\n    [BallRegistry.BallType.BURN, BallRegistry.BallType.FREEZE]: \"VOID\",\n}\n\nconst EVOLVED_BALL_DATA := {\n    \"BOMB\": {\n        \"name\": \"Bomb Ball\",\n        \"description\": \"Explodes on hit, damaging nearby enemies\",\n        \"base_damage\": 20,\n        \"base_speed\": 700.0,\n        \"effect\": \"explosion\"\n    },\n    \"BLIZZARD\": {\n        \"name\": \"Blizzard Ball\",\n        \"description\": \"Freezes and chains to multiple enemies\",\n        \"base_damage\": 15,\n        \"base_speed\": 850.0,\n        \"effect\": \"blizzard\"\n    },\n    # ... more evolved balls\n}\n\nfunc can_fuse(ball_a: int, ball_b: int) -\u003e bool:\n    var key := [mini(ball_a, ball_b), maxi(ball_a, ball_b)]\n    return key in FUSION_RECIPES\n\nfunc get_fusion_result(ball_a: int, ball_b: int) -\u003e String:\n    var key := [mini(ball_a, ball_b), maxi(ball_a, ball_b)]\n    return FUSION_RECIPES.get(key, \"\")\n\nfunc get_evolved_ball_data(evolved_type: String) -\u003e Dictionary:\n    return EVOLVED_BALL_DATA.get(evolved_type, {})\n```\n\n### Step 3: Fusion Selection UI\n```gdscript\n# scripts/ui/fusion_overlay.gd\nextends Control\n\nsignal fusion_completed(evolved_ball_type: String)\n\nvar _available_balls: Array = []\nvar _selected_balls: Array = []\n\nfunc show_fusion(fusion_ready_balls: Array) -\u003e void:\n    _available_balls = fusion_ready_balls\n    _selected_balls.clear()\n    _update_ui()\n    visible = true\n    get_tree().paused = true\n\nfunc _update_ui() -\u003e void:\n    # Show cards for each L3 ball\n    # Highlight selected balls\n    # Show fusion preview when 2 selected\n    pass\n\nfunc _on_ball_selected(ball_type: int) -\u003e void:\n    if ball_type in _selected_balls:\n        _selected_balls.erase(ball_type)\n    else:\n        if _selected_balls.size() \u003c 2:\n            _selected_balls.append(ball_type)\n    \n    _update_fusion_preview()\n\nfunc _update_fusion_preview() -\u003e void:\n    if _selected_balls.size() == 2:\n        var result := FusionRegistry.get_fusion_result(_selected_balls[0], _selected_balls[1])\n        if result:\n            # Show \"= BOMB BALL\" preview\n            pass\n        else:\n            # Show \"No valid fusion\"\n            pass\n\nfunc _on_fuse_pressed() -\u003e void:\n    if _selected_balls.size() != 2:\n        return\n    \n    var result := FusionRegistry.get_fusion_result(_selected_balls[0], _selected_balls[1])\n    if result:\n        # Remove the two L3 balls from inventory\n        BallRegistry.owned_balls.erase(_selected_balls[0])\n        BallRegistry.owned_balls.erase(_selected_balls[1])\n        \n        # Add evolved ball\n        BallRegistry.add_evolved_ball(result)\n        \n        fusion_completed.emit(result)\n        _close()\n\nfunc _close() -\u003e void:\n    get_tree().paused = false\n    visible = false\n```\n\n### Step 4: Evolved Ball Behavior\n```gdscript\n# Add to ball.gd\nvar is_evolved: bool = false\nvar evolved_type: String = \"\"\n\nfunc _apply_evolved_effect(enemy: Node2D) -\u003e void:\n    match evolved_type:\n        \"BOMB\":\n            _explode(enemy.global_position)\n        \"BLIZZARD\":\n            _blizzard_effect(enemy)\n        \"VIRUS\":\n            _virus_effect(enemy)\n        \"MAGMA\":\n            _spawn_magma_pool(enemy.global_position)\n        \"VOID\":\n            _void_effect(enemy)\n\nfunc _explode(pos: Vector2) -\u003e void:\n    # Spawn explosion effect\n    # Damage all enemies in radius\n    var explosion_radius := 100.0\n    var explosion_damage := damage\n    # ... implementation\n```\n\n### Step 5: Reactor Spawn in Enemy Spawner\n```gdscript\n# In enemy death handler\nfunc _on_enemy_died(enemy: EnemyBase) -\u003e void:\n    # Existing gem spawn\n    _spawn_gem(enemy.global_position, enemy.xp_value)\n    \n    # Rare fusion reactor drop\n    var reactor_chance := 0.02  # 2% base chance\n    reactor_chance += GameManager.current_wave * 0.001  # Increases with wave\n    \n    if randf() \u003c reactor_chance:\n        _spawn_fusion_reactor(enemy.global_position)\n```\n\n## Files to Create/Modify\n- NEW: scripts/entities/fusion_reactor.gd\n- NEW: scenes/entities/fusion_reactor.tscn\n- NEW: scripts/autoload/fusion_registry.gd\n- NEW: scripts/ui/fusion_overlay.gd\n- NEW: scenes/ui/fusion_overlay.tscn\n- MODIFY: scripts/autoload/ball_registry.gd (add evolved balls)\n- MODIFY: scripts/entities/ball.gd (evolved effects)\n- MODIFY: scripts/game/game_controller.gd\n- MODIFY: project.godot (autoloads)\n\n## Testing\n```python\nasync def test_fusion_reactor_spawns(game):\n    \"\"\"Fusion reactor should occasionally drop\"\"\"\n    pass\n\nasync def test_fusion_ui_appears(game):\n    \"\"\"Fusion UI shows when reactor collected with 2+ L3 balls\"\"\"\n    pass\n\nasync def test_valid_fusion_creates_evolved_ball(game):\n    \"\"\"Fusing Burn + Iron should create Bomb\"\"\"\n    pass\n```\n\n## Acceptance Criteria\n- [ ] Fusion reactors drop from enemies (rare)\n- [ ] Collecting reactor with 2+ L3 balls shows fusion UI\n- [ ] Can select two L3 balls to fuse\n- [ ] Valid combinations create evolved balls\n- [ ] Invalid combinations show \"no recipe\"\n- [ ] At least 5 fusion recipes working\n- [ ] Evolved balls have unique effects\n- [ ] Original balls removed after fusion","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T23:30:37.169404-06:00","created_by":"randroid","updated_at":"2026-01-05T23:30:37.169404-06:00"}
{"id":"GoPit-mb3","title":"Fix fire button repositioning on double tap","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T22:28:47.791979-06:00","created_by":"randroid","updated_at":"2026-01-05T22:33:45.478815-06:00","closed_at":"2026-01-05T22:33:45.478815-06:00","close_reason":"Fixed: _shake_button() now captures position at shake time instead of in _ready()"}
{"id":"GoPit-p5d","title":"Collect gems in PlayerZone, add to XP","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:14.69802-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.250059-06:00","closed_at":"2026-01-04T23:58:36.250059-06:00","close_reason":"Closed"}
{"id":"GoPit-p89","title":"Spawn gems on enemy death (connect to death signal)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:14.435555-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.248921-06:00","closed_at":"2026-01-04T23:58:36.248921-06:00","close_reason":"Closed"}
{"id":"GoPit-q65","title":"Enemy Warning \u0026 Attack System","description":"# Enemy Warning \u0026 Attack System\n\n## Parent Epic\nGoPit-3ky (Phase 1 - Core Alignment)\n\n## Overview\nReplace instant damage when enemies reach bottom with BallxPit-style warning ‚Üí shake ‚Üí attack sequence.\n\n## Current State\n- enemy_base.gd moves enemies downward\n- Damage occurs instantly when enemy enters player_zone Area2D\n- game_controller.gd: _on_player_zone_body_entered() deals damage immediately\n- danger_indicator.gd shows warning when enemies near bottom\n- No attack animation or delay exists\n\n## Requirements\n1. When enemy reaches attack range (not wall):\n   - Show red exclamation point (!) above enemy\n   - Enemy stops moving and shakes/vibrates\n   - After ~1 second warning, enemy leaps at player\n   - Damage dealt on contact with player (not wall)\n   - Enemy despawns after attack (hit or miss)\n2. Player can dodge attacks by moving\n3. Multiple enemies can be in \"attack mode\" simultaneously\n\n## BallxPit Reference\nIn BallxPit:\n- Enemies show \"!\" warning icon\n- Shake animation for ~1 second\n- Leap/lunge toward player's current position\n- Miss if player moved away\n- Creates dodge-focused gameplay\n\n## Implementation Approach\n\n### Step 1: Add Attack States to enemy_base.gd\n```gdscript\nenum State { DESCENDING, WARNING, ATTACKING, DEAD }\n\nvar current_state: State = State.DESCENDING\nvar _warning_timer: float = 0.0\nvar _attack_target: Vector2\n\nconst WARNING_DURATION: float = 1.0\nconst ATTACK_SPEED: float = 800.0\nconst ATTACK_RANGE_Y: float = 1000.0  # When to start warning\n\nfunc _physics_process(delta: float) -\u003e void:\n    match current_state:\n        State.DESCENDING:\n            _move(delta)\n            if global_position.y \u003e= ATTACK_RANGE_Y:\n                _enter_warning_state()\n        State.WARNING:\n            _do_warning(delta)\n        State.ATTACKING:\n            _do_attack(delta)\n\nfunc _enter_warning_state() -\u003e void:\n    current_state = State.WARNING\n    _warning_timer = WARNING_DURATION\n    _show_exclamation()\n    _start_shake()\n\nfunc _do_warning(delta: float) -\u003e void:\n    _warning_timer -= delta\n    _update_shake()\n    if _warning_timer \u003c= 0:\n        _enter_attack_state()\n\nfunc _enter_attack_state() -\u003e void:\n    current_state = State.ATTACKING\n    _hide_exclamation()\n    _stop_shake()\n    # Target player's current position\n    _attack_target = _get_player_position()\n    _play_attack_sound()\n\nfunc _do_attack(delta: float) -\u003e void:\n    var direction := (_attack_target - global_position).normalized()\n    velocity = direction * ATTACK_SPEED\n    move_and_slide()\n    \n    # Despawn if off-screen or reached target\n    if global_position.y \u003e 1400 or global_position.distance_to(_attack_target) \u003c 20:\n        queue_free()\n```\n\n### Step 2: Visual Effects\nExclamation mark:\n```gdscript\nvar _exclamation: Sprite2D  # Or Label with \"!\"\n\nfunc _show_exclamation() -\u003e void:\n    _exclamation = Sprite2D.new()  # Or preload scene\n    _exclamation.texture = preload(\"res://assets/sprites/exclamation.png\")\n    _exclamation.position = Vector2(0, -40)\n    add_child(_exclamation)\n    # Pulse animation\n    var tween := create_tween().set_loops()\n    tween.tween_property(_exclamation, \"scale\", Vector2(1.2, 1.2), 0.2)\n    tween.tween_property(_exclamation, \"scale\", Vector2(1.0, 1.0), 0.2)\n\nfunc _hide_exclamation() -\u003e void:\n    if _exclamation:\n        _exclamation.queue_free()\n```\n\nShake effect:\n```gdscript\nvar _shake_offset: Vector2 = Vector2.ZERO\nvar _shake_intensity: float = 5.0\n\nfunc _start_shake() -\u003e void:\n    # Handled in _update_shake\n\nfunc _update_shake() -\u003e void:\n    _shake_offset = Vector2(\n        randf_range(-_shake_intensity, _shake_intensity),\n        randf_range(-_shake_intensity, _shake_intensity)\n    )\n    position += _shake_offset  # Apply to visual only\n\nfunc _stop_shake() -\u003e void:\n    _shake_offset = Vector2.ZERO\n```\n\n### Step 3: Damage on Player Contact\nRemove wall-based damage, add contact-based:\n```gdscript\n# In enemy attack state, check collision with player\nfunc _do_attack(delta: float) -\u003e void:\n    # ... movement code ...\n    \n    # Check if hit player\n    var player := _get_player_node()\n    if player and global_position.distance_to(player.global_position) \u003c 30:\n        _deal_damage_to_player()\n        queue_free()\n```\n\nOr use collision detection:\n- Enemy collision mask includes player layer (16)\n- On collision with player during ATTACKING state, deal damage\n\n### Step 4: Update game_controller.gd\nRemove or modify _on_player_zone_body_entered:\n```gdscript\nfunc _on_player_zone_body_entered(body: Node2D) -\u003e void:\n    # OLD: Instant damage when reaching zone\n    # NEW: Enemies handle their own attack logic\n    pass  # Or remove this entirely\n```\n\n## Files to Modify\n- MODIFY: scripts/entities/enemies/enemy_base.gd (major changes)\n- MODIFY: scripts/game/game_controller.gd (remove instant damage)\n- NEW: assets/sprites/exclamation.png (or use Label)\n- OPTIONAL: scenes/effects/exclamation.tscn\n\n## Testing\n```python\nasync def test_enemy_warning_before_attack(game):\n    # Spawn enemy, wait for it to reach attack range\n    spawner = \"/root/Game/GameArea/Enemies/EnemySpawner\"\n    await game.call(spawner, \"spawn_enemy\")\n    \n    # Wait for enemy to descend\n    await asyncio.sleep(3.0)\n    \n    # Check enemy is in WARNING state (not instant death)\n    enemies = \"/root/Game/GameArea/Enemies\"\n    count = await game.call(enemies, \"get_child_count\")\n    # Enemy should still exist during warning phase\n\nasync def test_player_can_dodge_attack(game):\n    # Position player, let enemy attack\n    # Move player away during warning\n    # Verify no damage taken\n    pass\n\nasync def test_enemy_despawns_after_attack(game):\n    # Let enemy complete attack sequence\n    # Verify enemy is removed from scene\n    pass\n```\n\n## Acceptance Criteria\n- [ ] Enemies stop and show \"!\" when reaching attack range\n- [ ] Enemies visibly shake during warning phase\n- [ ] Warning lasts ~1 second\n- [ ] Enemy leaps toward player position after warning\n- [ ] Player can dodge by moving during warning\n- [ ] Damage only occurs on contact with player\n- [ ] Enemy despawns after attack completes\n- [ ] Multiple enemies can attack simultaneously\n\n## Notes\n- This fundamentally changes the feel of the game\n- Creates skill-based dodge gameplay\n- Consider difficulty: longer warning = easier\n- May need to tune ATTACK_RANGE_Y based on player speed","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-05T23:21:40.741107-06:00","created_by":"randroid","updated_at":"2026-01-05T23:21:40.741107-06:00"}
{"id":"GoPit-qa8","title":"Autofire Toggle System","description":"# Autofire Toggle System\n\n## Parent Epic\nGoPit-3ky (Phase 1 - Core Alignment)\n\n## Overview\nAdd ability to toggle automatic ball firing on/off, allowing hands-free shooting while player focuses on movement and dodging.\n\n## Current State\n- fire_button.gd handles manual tap-to-fire\n- Has cooldown_duration property (default 0.5s)\n- Fires on button press via \"fired\" signal\n- No autofire capability exists\n\n## Requirements\n1. Add \"AUTO\" toggle button near fire button\n2. When enabled, balls fire automatically at cooldown rate\n3. Visual indicator showing autofire state (on/off)\n4. Autofire direction: last aimed direction OR nearest enemy\n5. Autofire respects existing cooldown system\n6. Toggle persists during gameplay (not across sessions)\n\n## Implementation Approach\n\n### Step 1: Modify fire_button.gd\n```gdscript\n# Add to existing fire_button.gd\n\nvar autofire_enabled: bool = false\nvar _autofire_timer: float = 0.0\n\nsignal autofire_toggled(enabled: bool)\n\nfunc toggle_autofire() -\u003e void:\n    autofire_enabled = not autofire_enabled\n    autofire_toggled.emit(autofire_enabled)\n    _update_autofire_visual()\n\nfunc _process(delta: float) -\u003e void:\n    if autofire_enabled and _can_fire:\n        _autofire_timer += delta\n        if _autofire_timer \u003e= cooldown_duration:\n            _autofire_timer = 0.0\n            _do_fire()\n\nfunc _update_autofire_visual() -\u003e void:\n    # Change button color/icon when autofire active\n    modulate = Color(0.5, 1.0, 0.5) if autofire_enabled else Color.WHITE\n```\n\n### Step 2: Add Autofire Toggle Button\nIn HUD scene, add button near fire button:\n- Small toggle button labeled \"AUTO\"\n- Or: Long-press fire button to toggle\n- Or: Separate button in control area\n\nUI Layout:\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  (‚óé)              [AUTO] [üî•]       ‚îÇ\n‚îÇ  Move              Toggle  Fire     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Step 3: Auto-aim Logic (Optional Enhancement)\nWhen autofire is on, optionally aim at nearest enemy:\n```gdscript\nfunc _get_autofire_direction() -\u003e Vector2:\n    if aim_at_nearest_enemy:\n        var nearest = _find_nearest_enemy()\n        if nearest:\n            return (nearest.global_position - player.global_position).normalized()\n    # Fallback to last aimed direction\n    return current_aim_direction\n```\n\n### Step 4: Wire to game_controller.gd\n```gdscript\nfunc _ready() -\u003e void:\n    # ... existing code ...\n    if fire_button:\n        fire_button.autofire_toggled.connect(_on_autofire_toggled)\n\nfunc _on_autofire_toggled(enabled: bool) -\u003e void:\n    # Optional: play sound, show indicator\n    if enabled:\n        SoundManager.play(SoundManager.SoundType.UI_TOGGLE)\n```\n\n## Files to Modify\n- MODIFY: scripts/input/fire_button.gd\n- MODIFY: scenes/ui/hud.tscn (add AUTO button)\n- MODIFY: scripts/ui/hud.gd (wire toggle)\n- OPTIONAL: scripts/game/game_controller.gd\n\n## Testing\n```python\nasync def test_autofire_toggle(game):\n    fire_btn = \"/root/Game/UI/HUD/.../FireButton\"\n    \n    # Initially off\n    autofire = await game.get_property(fire_btn, \"autofire_enabled\")\n    assert autofire == False\n    \n    # Toggle on\n    await game.call(fire_btn, \"toggle_autofire\")\n    autofire = await game.get_property(fire_btn, \"autofire_enabled\")\n    assert autofire == True\n    \n    # Verify balls fire automatically\n    initial_balls = await game.call(\"/root/Game/GameArea/Balls\", \"get_child_count\")\n    await asyncio.sleep(1.5)  # Wait for ~3 shots at 0.5s cooldown\n    final_balls = await game.call(\"/root/Game/GameArea/Balls\", \"get_child_count\")\n    assert final_balls \u003e initial_balls\n\nasync def test_autofire_respects_cooldown(game):\n    # Enable autofire, count balls over time\n    # Should fire at cooldown_duration rate, not faster\n    pass\n```\n\n## Acceptance Criteria\n- [ ] AUTO toggle button visible in HUD\n- [ ] Tapping AUTO toggles autofire state\n- [ ] Visual feedback shows autofire is active\n- [ ] Balls fire automatically when enabled\n- [ ] Fire rate matches cooldown_duration\n- [ ] Can still manual fire when autofire is off\n- [ ] Autofire stops when game is paused\n\n## Design Considerations\n- BallxPit has autofire as standard feature\n- Most players will use autofire most of the time\n- Manual fire still useful for precise timing\n- Consider: autofire could be upgrade that increases fire rate","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-05T23:21:40.471805-06:00","created_by":"randroid","updated_at":"2026-01-05T23:21:40.471805-06:00"}
{"id":"GoPit-qq6","title":"Show persistent aim indicator after joystick release","description":"## Problem\nAim line disappears when joystick is released. Players lose visual feedback of current aim direction.\n\n## Implementation Plan\n\n### Modify Aim Line Behavior\n**Modify: `scripts/input/aim_line.gd`**\n\n```gdscript\nvar is_active: bool = false\nvar last_direction: Vector2 = Vector2.UP\nvar fade_alpha: float = 0.3  # Alpha when not actively aiming\n\nfunc show_line(direction: Vector2, origin: Vector2) -\u003e void:\n    is_active = true\n    last_direction = direction\n    modulate.a = 1.0\n    _update_line(direction, origin)\n\nfunc hide_line() -\u003e void:\n    is_active = false\n    # Don't hide - just fade to ghost state\n    var tween = create_tween()\n    tween.tween_property(self, \"modulate:a\", fade_alpha, 0.2)\n\nfunc _update_line(direction: Vector2, origin: Vector2) -\u003e void:\n    clear_points()\n    add_point(origin)\n    add_point(origin + direction * max_length)\n```\n\n### Wire Up Origin Updates\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _process(delta):\n    # Keep ghost aim line updated with ball spawner position\n    if not joystick.is_active and aim_line.visible:\n        aim_line._update_line(aim_line.last_direction, ball_spawner.global_position)\n```\n\n### Visual Styling\n- Active: Bright white, full opacity\n- Ghost: Dim gray, 30% opacity, slightly shorter\n\n### Files to Modify\n1. MODIFY: `scripts/input/aim_line.gd` - ghost state behavior\n2. MODIFY: `scripts/game/game_controller.gd` - update ghost line position","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:12:30.92006-06:00","created_by":"randroid","updated_at":"2026-01-05T02:50:04.187773-06:00","closed_at":"2026-01-05T02:50:04.187773-06:00","close_reason":"Aim line now persists as ghost state after joystick release"}
{"id":"GoPit-s0e","title":"Epic 4: Enemy System","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:13:58.485858-06:00","created_by":"randroid","updated_at":"2026-01-05T01:14:16.658808-06:00","closed_at":"2026-01-05T01:14:16.658808-06:00","close_reason":"All sub-tasks completed","dependencies":[{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-1o7","type":"blocks","created_at":"2026-01-04T23:17:25.893714-06:00","created_by":"randroid"},{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-zju","type":"blocks","created_at":"2026-01-04T23:17:25.955312-06:00","created_by":"randroid"},{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-exe","type":"blocks","created_at":"2026-01-04T23:17:26.017009-06:00","created_by":"randroid"},{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-tql","type":"blocks","created_at":"2026-01-04T23:17:26.078015-06:00","created_by":"randroid"},{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-7of","type":"blocks","created_at":"2026-01-04T23:17:26.137822-06:00","created_by":"randroid"},{"issue_id":"GoPit-s0e","depends_on_id":"GoPit-8hv","type":"blocks","created_at":"2026-01-04T23:17:45.112285-06:00","created_by":"randroid"}]}
{"id":"GoPit-sm9","title":"Add wall StaticBody2D boundaries (left/right)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:31.941053-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.026144-06:00","closed_at":"2026-01-04T23:53:52.026144-06:00","close_reason":"Closed"}
{"id":"GoPit-t1b","title":"Increase spawn rate gradually with waves","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:16:29.218771-06:00","created_by":"randroid","updated_at":"2026-01-05T00:01:32.997861-06:00","closed_at":"2026-01-05T00:01:32.997861-06:00","close_reason":"Closed"}
{"id":"GoPit-tnn","title":"Epic 7: Wave Progression \u0026 Polish","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:14:07.262618-06:00","created_by":"randroid","updated_at":"2026-01-05T01:15:43.925306-06:00","closed_at":"2026-01-05T01:15:43.925306-06:00","close_reason":"All required sub-tasks completed (sounds optional)","dependencies":[{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-itz","type":"blocks","created_at":"2026-01-04T23:17:27.471623-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-a8z","type":"blocks","created_at":"2026-01-04T23:17:27.532744-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-t1b","type":"blocks","created_at":"2026-01-04T23:17:27.594609-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-4mj","type":"blocks","created_at":"2026-01-04T23:17:27.657053-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-9vr","type":"blocks","created_at":"2026-01-04T23:17:27.71829-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-4le","type":"blocks","created_at":"2026-01-04T23:17:45.809106-06:00","created_by":"randroid"},{"issue_id":"GoPit-tnn","depends_on_id":"GoPit-9as","type":"blocks","created_at":"2026-01-04T23:17:45.870081-06:00","created_by":"randroid"}]}
{"id":"GoPit-tql","title":"Implement enemy hit flash visual feedback","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:46.161777-06:00","created_by":"randroid","updated_at":"2026-01-04T23:51:41.182245-06:00","closed_at":"2026-01-04T23:51:41.182245-06:00","close_reason":"Closed"}
{"id":"GoPit-ud8","title":"Create gem.tscn (procedural sparkle, value property)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:14.172012-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.247896-06:00","closed_at":"2026-01-04T23:58:36.247896-06:00","close_reason":"Closed"}
{"id":"GoPit-veq","title":"Character Resource \u0026 Selection UI","description":"# Character Resource \u0026 Selection UI\n\n## Parent Epic\nGoPit-ivv (Phase 4 - Character System)\n\n## Overview\nCreate character data resource type and selection screen shown before game start.\n\n## Requirements\n1. Character resource defining stats, starting ball, passive\n2. Character selection screen with 6 characters\n3. Character preview showing stats and ability\n4. Selected character affects gameplay\n5. Character unlock system (future)\n\n## Character Data\n```gdscript\n# resources/characters/character.gd\nclass_name Character\nextends Resource\n\n@export var character_name: String\n@export var portrait: Texture2D\n@export var description: String\n\n# Stats (relative to 1.0 baseline)\n@export var endurance: float = 1.0  # HP multiplier\n@export var strength: float = 1.0   # Damage multiplier\n@export var leadership: float = 1.0 # Baby ball rate\n@export var speed: float = 1.0      # Movement speed\n@export var dexterity: float = 1.0  # Crit chance\n@export var intelligence: float = 1.0  # Effect duration\n\n@export var starting_ball: int  # BallRegistry.BallType\n@export var passive_name: String\n@export var passive_description: String\n\n@export var is_unlocked: bool = true\n@export var unlock_requirement: String\n```\n\n## Character Roster\n| Name | Ball | Passive | Focus |\n|------|------|---------|-------|\n| Rookie | Basic | None | Balanced |\n| Pyro | Burn | +20% fire dmg | Strength |\n| Frost Mage | Freeze | Frozen +50% dmg | Intelligence |\n| Tactician | Iron | +2 baby balls | Leadership |\n| Gambler | Random | 3x crit dmg | Dexterity |\n| Vampire | Bleed | Lifesteal | Endurance |\n\n## Selection UI Layout\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ         SELECT CHARACTER            ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ  [Portrait]     ROOKIE              ‚îÇ\n‚îÇ                 \"Jack of all trades\"‚îÇ\n‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ\n‚îÇ  HP: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë                     ‚îÇ\n‚îÇ  DMG: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë                    ‚îÇ\n‚îÇ  SPD: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë                    ‚îÇ\n‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ\n‚îÇ  Starting: Basic Ball               ‚îÇ\n‚îÇ  Passive: None                      ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ [\u003c]  ‚óè‚óã‚óã‚óã‚óã‚óã  [\u003e]                   ‚îÇ\n‚îÇ           [START]                   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Files to Create\n- NEW: resources/characters/character.gd\n- NEW: resources/characters/*.tres (6 characters)\n- NEW: scenes/ui/character_select.tscn\n- NEW: scripts/ui/character_select.gd\n- MODIFY: Main menu flow to include selection\n\n## Acceptance Criteria\n- [ ] Character resource type created\n- [ ] 6 character resources defined\n- [ ] Selection UI shows all characters\n- [ ] Can browse and select character\n- [ ] Selected character stats applied to game\n- [ ] Starting ball matches character","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:41:00.103959-06:00","created_by":"randroid","updated_at":"2026-01-05T23:41:00.103959-06:00"}
{"id":"GoPit-vmo","title":"Add floating XP text on gem collection","description":"## Problem\nWhen collecting gems, XP bar fills silently. No indication of amount gained.\n\n## Implementation Plan\n\n### Create Floating Text Component\n**File: `scripts/effects/floating_text.gd`** (new)\n\n```gdscript\nextends Label\n\n@export var float_distance: float = 60.0\n@export var duration: float = 0.8\n\nfunc _ready():\n    # Center the label\n    horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER\n    \n    # Animation\n    var tween = create_tween()\n    tween.set_parallel(true)\n    \n    # Float up\n    tween.tween_property(self, \"position:y\", position.y - float_distance, duration)\n    \n    # Fade out (delayed start)\n    modulate.a = 1.0\n    tween.tween_property(self, \"modulate:a\", 0.0, duration * 0.5).set_delay(duration * 0.5)\n    \n    # Scale pop\n    scale = Vector2(0.5, 0.5)\n    tween.tween_property(self, \"scale\", Vector2(1.0, 1.0), 0.15).set_ease(Tween.EASE_OUT)\n    \n    tween.chain().tween_callback(queue_free)\n\nstatic func spawn(parent: Node, pos: Vector2, text: String, color: Color = Color.WHITE):\n    var label = preload(\"res://scenes/effects/floating_text.tscn\").instantiate()\n    label.text = text\n    label.position = pos\n    label.modulate = color\n    parent.add_child(label)\n```\n\n### Scene Setup\n**File: `scenes/effects/floating_text.tscn`**\n\n```\nFloatingText (Label)\n- font_size: 24\n- outline_size: 2\n- outline_color: black\n- z_index: 100\n```\n\n### Wire Up XP Display\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _on_player_zone_area_entered(area: Area2D) -\u003e void:\n    if area.collision_layer \u0026 8:  # Gem layer\n        if area.has_method(\"get_xp_value\"):\n            var xp = area.get_xp_value()\n            GameManager.add_xp(xp)\n            \n            # Spawn floating text\n            FloatingText.spawn(\n                self,\n                area.global_position,\n                \"+%d XP\" % xp,\n                Color(0.3, 1.0, 0.5)  # Green tint\n            )\n        \n        SoundManager.play(SoundManager.SoundType.GEM_COLLECT)\n        area.queue_free()\n```\n\n### Optional: XP Bar Pulse\n**Modify: `scripts/ui/hud.gd`**\n\n```gdscript\nfunc _on_xp_gained():\n    var tween = create_tween()\n    tween.tween_property(xp_bar, \"modulate\", Color(1.5, 1.5, 1.5), 0.1)\n    tween.tween_property(xp_bar, \"modulate\", Color.WHITE, 0.2)\n```\n\n### Files to Create/Modify\n1. NEW: `scenes/effects/floating_text.tscn`\n2. NEW: `scripts/effects/floating_text.gd`\n3. MODIFY: `scripts/game/game_controller.gd` - spawn floating text\n4. MODIFY: `scripts/ui/hud.gd` - XP bar pulse (optional)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T02:13:40.513145-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.521405-06:00","closed_at":"2026-01-05T10:31:02.521405-06:00","close_reason":"Closed"}
{"id":"GoPit-w3h","title":"Reduce joystick dead zone for responsiveness","description":"## Problem\n10% dead zone (8px on 80px radius) might feel laggy for small movements.\n\n## Implementation Plan\n\n### Reduce Dead Zone\n**Modify: `scripts/input/virtual_joystick.gd`**\n\n```gdscript\n# Change from 0.1 to 0.05\n@export var dead_zone: float = 0.05  # 5% dead zone = 4px\n```\n\n### Add Visual Dead Zone Feedback (Optional)\nShow subtle indicator when in dead zone:\n\n```gdscript\nfunc _process(_delta):\n    if is_active:\n        var distance = knob_position.length() / max_distance\n        \n        if distance \u003c dead_zone:\n            # In dead zone - show subtle feedback\n            knob.modulate = Color(0.7, 0.7, 0.7)\n        else:\n            knob.modulate = Color.WHITE\n```\n\n### Alternative: Adaptive Dead Zone\nSmaller dead zone for precise aiming, larger when moving fast:\n\n```gdscript\nfunc _calculate_dead_zone() -\u003e float:\n    # If knob was moving fast recently, use larger dead zone\n    # For precision aiming, use smaller dead zone\n    var velocity = (knob_position - last_knob_position).length()\n    last_knob_position = knob_position\n    \n    if velocity \u003e 10:\n        return 0.1  # Fast movement - larger dead zone\n    else:\n        return 0.05  # Slow/precise - smaller dead zone\n```\n\n### Files to Modify\n1. MODIFY: `scripts/input/virtual_joystick.gd` - reduce dead zone","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-05T02:13:41.034539-06:00","created_by":"randroid","updated_at":"2026-01-05T02:13:41.034539-06:00"}
{"id":"GoPit-x2u","title":"Ball Leveling System (L1-L3)","description":"# Ball Leveling System (L1-L3)\n\n## Parent Epic\nGoPit-zxr (Phase 2 - Ball Evolution System)\n\n## Overview\nImplement ball leveling where each ball type can be upgraded from Level 1 to Level 3, with L3 balls eligible for fusion.\n\n## Current State\n- level_up_overlay.gd has upgrade_stacks tracking\n- Ball types exist but no formal \"level\" concept\n- Upgrades increase global stats (damage, speed) not per-ball-type\n\n## Requirements\n1. Each ball type tracks its own level (1-3)\n2. Level 2: +50% damage and stats\n3. Level 3: +100% damage, fusion-eligible\n4. Level-up UI shows current ball levels\n5. Can't upgrade past L3 (offer fusion instead)\n6. Visual distinction per level\n\n## Implementation Approach\n\n### Step 1: Create Ball Type Registry\n```gdscript\n# scripts/autoload/ball_registry.gd (new autoload)\nextends Node\n\nenum BallType { BASIC, BURN, FREEZE, POISON, BLEED, LIGHTNING, IRON }\n\nclass BallData:\n    var type: BallType\n    var level: int = 1\n    var base_damage: int\n    var base_speed: float\n    \n    func get_damage() -\u003e int:\n        return int(base_damage * _get_level_multiplier())\n    \n    func get_speed() -\u003e float:\n        return base_speed * _get_level_multiplier()\n    \n    func _get_level_multiplier() -\u003e float:\n        match level:\n            1: return 1.0\n            2: return 1.5\n            3: return 2.0\n        return 1.0\n    \n    func can_level_up() -\u003e bool:\n        return level \u003c 3\n    \n    func is_fusion_ready() -\u003e bool:\n        return level \u003e= 3\n\n# Owned ball types for current run\nvar owned_balls: Dictionary = {}  # BallType -\u003e BallData\n\nfunc _ready() -\u003e void:\n    GameManager.game_started.connect(_reset_for_new_run)\n\nfunc _reset_for_new_run() -\u003e void:\n    owned_balls.clear()\n    # Start with basic ball at L1\n    add_ball(BallType.BASIC)\n\nfunc add_ball(type: BallType) -\u003e void:\n    if type in owned_balls:\n        # Already owned, try to level up\n        level_up_ball(type)\n        return\n    \n    var data := BallData.new()\n    data.type = type\n    data.level = 1\n    data.base_damage = _get_base_damage(type)\n    data.base_speed = _get_base_speed(type)\n    owned_balls[type] = data\n\nfunc level_up_ball(type: BallType) -\u003e bool:\n    if type not in owned_balls:\n        return false\n    \n    var ball: BallData = owned_balls[type]\n    if ball.can_level_up():\n        ball.level += 1\n        return true\n    return false\n\nfunc get_ball_level(type: BallType) -\u003e int:\n    if type in owned_balls:\n        return owned_balls[type].level\n    return 0\n\nfunc get_fusion_ready_balls() -\u003e Array[BallType]:\n    var ready: Array[BallType] = []\n    for type in owned_balls:\n        if owned_balls[type].is_fusion_ready():\n            ready.append(type)\n    return ready\n\nfunc _get_base_damage(type: BallType) -\u003e int:\n    match type:\n        BallType.BASIC: return 10\n        BallType.BURN: return 8\n        BallType.FREEZE: return 6\n        BallType.POISON: return 7\n        BallType.BLEED: return 8\n        BallType.LIGHTNING: return 9\n        BallType.IRON: return 15\n    return 10\n\nfunc _get_base_speed(type: BallType) -\u003e float:\n    match type:\n        BallType.IRON: return 600.0  # Slower but hits harder\n        BallType.LIGHTNING: return 900.0  # Fast\n        _: return 800.0\n```\n\n### Step 2: Update Level Up UI\n```gdscript\n# In level_up_overlay.gd\n\nfunc _randomize_upgrades() -\u003e void:\n    _available_upgrades.clear()\n    var pool: Array = []\n    \n    # Add new ball types not yet owned\n    for ball_type in BallRegistry.BallType.values():\n        if ball_type not in BallRegistry.owned_balls:\n            pool.append({\"type\": \"new_ball\", \"ball_type\": ball_type})\n    \n    # Add level-ups for owned balls \u003c L3\n    for ball_type in BallRegistry.owned_balls:\n        var data: BallRegistry.BallData = BallRegistry.owned_balls[ball_type]\n        if data.can_level_up():\n            pool.append({\"type\": \"level_up\", \"ball_type\": ball_type, \"to_level\": data.level + 1})\n    \n    # Add passive upgrades\n    for upgrade_type in UPGRADE_DATA:\n        # ... existing logic ...\n        pool.append({\"type\": \"passive\", \"upgrade\": upgrade_type})\n    \n    pool.shuffle()\n    _available_upgrades = pool.slice(0, 3)\n```\n\n### Step 3: Visual Ball Level Indicators\n```gdscript\n# In ball.gd\nvar ball_level: int = 1\n\nfunc _draw() -\u003e void:\n    # Draw ball with level-based visual\n    var size_mult := 1.0 + (ball_level - 1) * 0.15  # L2=1.15x, L3=1.3x\n    var actual_radius := radius * size_mult\n    \n    draw_circle(Vector2.ZERO, actual_radius, ball_color)\n    \n    # Level indicator rings\n    if ball_level \u003e= 2:\n        draw_arc(Vector2.ZERO, actual_radius + 2, 0, TAU, 24, Color.WHITE, 1.5)\n    if ball_level \u003e= 3:\n        draw_arc(Vector2.ZERO, actual_radius + 5, 0, TAU, 24, Color.GOLD, 2.0)\n```\n\n### Step 4: Update Ball Spawner\n```gdscript\n# ball_spawner.gd should use BallRegistry for stats\nfunc _spawn_ball(direction: Vector2) -\u003e void:\n    var ball := ball_scene.instantiate()\n    \n    # Get stats from registry\n    var ball_data := BallRegistry.owned_balls.get(current_ball_type)\n    if ball_data:\n        ball.damage = ball_data.get_damage()\n        ball.speed = ball_data.get_speed()\n        ball.ball_level = ball_data.level\n    \n    # ... rest of spawn logic ...\n```\n\n## Files to Create/Modify\n- NEW: scripts/autoload/ball_registry.gd\n- MODIFY: project.godot (add autoload)\n- MODIFY: scripts/ui/level_up_overlay.gd\n- MODIFY: scripts/entities/ball.gd\n- MODIFY: scripts/entities/ball_spawner.gd\n\n## Testing\n```python\nasync def test_ball_level_up(game):\n    \"\"\"Ball should level from 1 to 2 to 3\"\"\"\n    pass\n\nasync def test_level_affects_damage(game):\n    \"\"\"L2 = 1.5x damage, L3 = 2x damage\"\"\"\n    pass\n\nasync def test_cant_level_past_3(game):\n    \"\"\"L3 balls can't be leveled further\"\"\"\n    pass\n```\n\n## Acceptance Criteria\n- [ ] Balls track individual levels\n- [ ] Level 2 grants +50% stats\n- [ ] Level 3 grants +100% stats\n- [ ] UI shows ball levels\n- [ ] Can't upgrade past L3\n- [ ] L3 balls visually distinct\n- [ ] Ball registry persists for run duration","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-05T23:30:36.949927-06:00","created_by":"randroid","updated_at":"2026-01-05T23:30:36.949927-06:00"}
{"id":"GoPit-xb8","title":"Create game_over.tscn overlay with Restart button","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:16:00.596768-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:36.245736-06:00","closed_at":"2026-01-04T23:58:36.245736-06:00","close_reason":"Closed"}
{"id":"GoPit-y1l","title":"Integrate input components into game.tscn","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:20.91489-06:00","created_by":"randroid","updated_at":"2026-01-04T23:53:52.021638-06:00","closed_at":"2026-01-04T23:53:52.021638-06:00","close_reason":"Closed"}
{"id":"GoPit-y92","title":"Create project.godot with portrait 720x1280, gl_compatibility renderer","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:05.484161-06:00","created_by":"randroid","updated_at":"2026-01-04T23:30:02.747085-06:00","closed_at":"2026-01-04T23:30:02.747085-06:00","close_reason":"Closed"}
{"id":"GoPit-ya7","title":"Epic 2: Input \u0026 Aiming","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T23:13:52.760854-06:00","created_by":"randroid","updated_at":"2026-01-04T23:58:48.443681-06:00","closed_at":"2026-01-04T23:58:48.443681-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-ya7","depends_on_id":"GoPit-6wl","type":"blocks","created_at":"2026-01-04T23:17:24.964918-06:00","created_by":"randroid"},{"issue_id":"GoPit-ya7","depends_on_id":"GoPit-84z","type":"blocks","created_at":"2026-01-04T23:17:25.027772-06:00","created_by":"randroid"},{"issue_id":"GoPit-ya7","depends_on_id":"GoPit-4ap","type":"blocks","created_at":"2026-01-04T23:17:25.089482-06:00","created_by":"randroid"},{"issue_id":"GoPit-ya7","depends_on_id":"GoPit-y1l","type":"blocks","created_at":"2026-01-04T23:17:25.150324-06:00","created_by":"randroid"},{"issue_id":"GoPit-ya7","depends_on_id":"GoPit-enn","type":"blocks","created_at":"2026-01-04T23:17:44.649119-06:00","created_by":"randroid"}]}
{"id":"GoPit-z2q","title":"Character Stats Integration","description":"# Character Stats Integration\n\n## Parent Epic\nGoPit-ivv (Phase 4 - Character System)\n\n## Overview\nWire character stats to all gameplay systems so chosen character affects HP, damage, speed, etc.\n\n## Requirements\n1. GameManager loads selected character\n2. HP scales with Endurance stat\n3. Ball damage scales with Strength\n4. Movement speed scales with Speed stat\n5. Crit chance affected by Dexterity\n6. Status duration affected by Intelligence\n7. Baby ball rate affected by Leadership\n8. Passive abilities activate\n\n## Implementation\n```gdscript\n# game_manager.gd modifications\nvar current_character: Character\n\nfunc start_game_with_character(character: Character) -\u003e void:\n    current_character = character\n    max_hp = int(100 * character.endurance)\n    # ... apply other stats\n\n# ball_spawner.gd\nfunc get_damage() -\u003e int:\n    var base := ball_damage\n    return int(base * GameManager.current_character.strength)\n\n# player.gd\nfunc get_move_speed() -\u003e float:\n    return base_speed * GameManager.current_character.speed\n```\n\n## Passive Ability System\n```gdscript\n# Each passive is a script that hooks into game events\n# Example: Pyro passive\nfunc _on_burn_damage(amount: int) -\u003e int:\n    return int(amount * 1.2)  # +20% fire damage\n```\n\n## Files to Modify\n- MODIFY: scripts/autoload/game_manager.gd\n- MODIFY: scripts/entities/ball_spawner.gd\n- MODIFY: scripts/entities/player.gd\n- MODIFY: scripts/entities/baby_ball_spawner.gd\n- NEW: scripts/characters/passives/*.gd\n\n## Acceptance Criteria\n- [ ] All 6 stats affect gameplay\n- [ ] Endurance changes max HP\n- [ ] Strength changes ball damage\n- [ ] Speed changes player movement\n- [ ] Dexterity changes crit chance\n- [ ] Intelligence changes effect duration\n- [ ] Leadership changes baby ball rate\n- [ ] Each character passive works","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T23:41:00.304164-06:00","created_by":"randroid","updated_at":"2026-01-05T23:41:00.304164-06:00","dependencies":[{"issue_id":"GoPit-z2q","depends_on_id":"GoPit-veq","type":"blocks","created_at":"2026-01-05T23:42:46.446748-06:00","created_by":"randroid"}]}
{"id":"GoPit-zb6","title":"Add high score persistence","description":"## Problem\nNo persistence between sessions. Players can't track their best runs.\n\n## Implementation Plan\n\n### High Score Data Structure\n**Modify: `scripts/autoload/game_manager.gd`** (or create new autoload)\n\n```gdscript\nvar high_scores := {\n    \"highest_wave\": 0,\n    \"highest_level\": 0,\n    \"most_enemies_killed\": 0,\n    \"longest_survival\": 0.0,\n    \"highest_combo\": 0,\n    \"total_runs\": 0\n}\n\nfunc _ready():\n    _load_high_scores()\n\nfunc _load_high_scores():\n    if FileAccess.file_exists(\"user://highscores.save\"):\n        var file = FileAccess.open(\"user://highscores.save\", FileAccess.READ)\n        var data = JSON.parse_string(file.get_as_text())\n        if data:\n            for key in high_scores:\n                if key in data:\n                    high_scores[key] = data[key]\n\nfunc _save_high_scores():\n    var file = FileAccess.open(\"user://highscores.save\", FileAccess.WRITE)\n    file.store_string(JSON.stringify(high_scores))\n\nfunc check_high_scores():\n    var new_records: Array[String] = []\n    \n    if current_wave \u003e high_scores.highest_wave:\n        high_scores.highest_wave = current_wave\n        new_records.append(\"Wave\")\n    \n    if player_level \u003e high_scores.highest_level:\n        high_scores.highest_level = player_level\n        new_records.append(\"Level\")\n    \n    if stats.enemies_killed \u003e high_scores.most_enemies_killed:\n        high_scores.most_enemies_killed = stats.enemies_killed\n        new_records.append(\"Enemies\")\n    \n    if stats.time_survived \u003e high_scores.longest_survival:\n        high_scores.longest_survival = stats.time_survived\n        new_records.append(\"Time\")\n    \n    if stats.highest_combo \u003e high_scores.highest_combo:\n        high_scores.highest_combo = stats.highest_combo\n        new_records.append(\"Combo\")\n    \n    high_scores.total_runs += 1\n    _save_high_scores()\n    \n    return new_records\n\nfunc end_game():\n    var new_records = check_high_scores()\n    # ... existing code ...\n    # new_records can be passed to game over screen\n```\n\n### Game Over Screen Updates\n**Modify: `scripts/ui/game_over_overlay.gd`**\n\n```gdscript\n@onready var new_record_label: Label = $Panel/VBoxContainer/NewRecordLabel\n@onready var high_score_container: VBoxContainer = $Panel/VBoxContainer/HighScores\n\nfunc _on_game_over():\n    visible = true\n    \n    # Display current run stats...\n    \n    # Check for new records\n    var new_records = GameManager.check_high_scores()\n    if new_records.size() \u003e 0:\n        new_record_label.visible = true\n        new_record_label.text = \"NEW RECORD: \" + \", \".join(new_records)\n        _animate_new_record()\n    else:\n        new_record_label.visible = false\n    \n    # Show all-time high scores\n    _display_high_scores()\n\nfunc _display_high_scores():\n    var hs = GameManager.high_scores\n    $HighWave.text = \"Best Wave: %d\" % hs.highest_wave\n    $HighLevel.text = \"Best Level: %d\" % hs.highest_level\n    $HighEnemies.text = \"Most Kills: %d\" % hs.most_enemies_killed\n    $TotalRuns.text = \"Total Runs: %d\" % hs.total_runs\n\nfunc _animate_new_record():\n    var tween = create_tween().set_loops(3)\n    tween.tween_property(new_record_label, \"modulate\", Color.YELLOW, 0.3)\n    tween.tween_property(new_record_label, \"modulate\", Color.WHITE, 0.3)\n```\n\n### Files to Modify\n1. MODIFY: `scripts/autoload/game_manager.gd` - high score tracking\n2. MODIFY: `scenes/ui/game_over_overlay.tscn` - add high score display\n3. MODIFY: `scripts/ui/game_over_overlay.gd` - display high scores","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T02:15:33.254257-06:00","created_by":"randroid","updated_at":"2026-01-05T10:31:02.527407-06:00","closed_at":"2026-01-05T10:31:02.527407-06:00","close_reason":"Closed","dependencies":[{"issue_id":"GoPit-zb6","depends_on_id":"GoPit-33z","type":"blocks","created_at":"2026-01-05T02:15:50.563357-06:00","created_by":"randroid"}]}
{"id":"GoPit-zju","title":"Create slime.tscn (procedural graphic, straight-down movement)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:15:45.643608-06:00","created_by":"randroid","updated_at":"2026-01-04T23:51:41.179724-06:00","closed_at":"2026-01-04T23:51:41.179724-06:00","close_reason":"Closed"}
{"id":"GoPit-zmz","title":"Add pause menu with mute option","description":"## Problem\nPlayers cannot pause the game. On mobile, interruptions are constant (notifications, calls, switching apps).\n\n## Implementation Plan\n\n### Phase 1: Pause State in GameManager\n**Modify: `scripts/autoload/game_manager.gd`**\n\n```gdscript\n# Already has PAUSED state, just need to wire it up\n\nfunc toggle_pause():\n    if current_state == GameState.PLAYING:\n        pause_game()\n    elif current_state == GameState.PAUSED:\n        resume_game()\n```\n\n### Phase 2: Pause Overlay UI\n**File: `scenes/ui/pause_overlay.tscn`** (new)\n\n```\nPauseOverlay (CanvasLayer) [process_mode=ALWAYS]\n‚îî‚îÄ‚îÄ ColorRect (dim background, 0.5 alpha black)\n    ‚îî‚îÄ‚îÄ Panel (centered)\n        ‚îî‚îÄ‚îÄ VBoxContainer\n            ‚îú‚îÄ‚îÄ Label (\"PAUSED\")\n            ‚îú‚îÄ‚îÄ ResumeButton\n            ‚îú‚îÄ‚îÄ SettingsButton\n            ‚îî‚îÄ‚îÄ QuitButton\n```\n\n**File: `scripts/ui/pause_overlay.gd`**\n\n```gdscript\nextends CanvasLayer\n\nfunc _ready():\n    visible = false\n    process_mode = Node.PROCESS_MODE_ALWAYS\n\nfunc _unhandled_input(event):\n    # Handle back button on Android\n    if event.is_action_pressed(\"ui_cancel\"):\n        _toggle_pause()\n\nfunc _toggle_pause():\n    visible = !visible\n    if visible:\n        GameManager.pause_game()\n    else:\n        GameManager.resume_game()\n\nfunc _on_resume_pressed():\n    _toggle_pause()\n\nfunc _on_settings_pressed():\n    # Show settings overlay\n    pass\n\nfunc _on_quit_pressed():\n    get_tree().paused = false\n    get_tree().reload_current_scene()\n```\n\n### Phase 3: Pause Button on HUD\n**Modify: `scenes/game.tscn`**\n\nAdd pause button (hamburger/pause icon) in top-right corner of HUD.\n\n**Modify: `scripts/ui/hud.gd`**\n\n```gdscript\n@onready var pause_button: Button = $TopBar/PauseButton\n@onready var pause_overlay: CanvasLayer = $\"../PauseOverlay\"\n\nfunc _ready():\n    pause_button.pressed.connect(_on_pause_pressed)\n\nfunc _on_pause_pressed():\n    pause_overlay._toggle_pause()\n```\n\n### Phase 4: Auto-pause on App Background\n**Modify: `scripts/game/game_controller.gd`**\n\n```gdscript\nfunc _notification(what):\n    if what == NOTIFICATION_APPLICATION_FOCUS_OUT:\n        if GameManager.current_state == GameManager.GameState.PLAYING:\n            GameManager.pause_game()\n            pause_overlay.visible = true\n```\n\n### Files to Create/Modify\n1. NEW: `scenes/ui/pause_overlay.tscn`\n2. NEW: `scripts/ui/pause_overlay.gd`\n3. MODIFY: `scenes/game.tscn` - add pause button, pause overlay\n4. MODIFY: `scripts/ui/hud.gd` - wire pause button\n5. MODIFY: `scripts/game/game_controller.gd` - auto-pause on focus out\n\n### Testing\n- Verify pause freezes all gameplay\n- Verify resume continues correctly\n- Verify auto-pause on app background\n- Verify back button works on Android","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T01:48:08.029743-06:00","created_by":"randroid","updated_at":"2026-01-05T02:21:51.365656-06:00","closed_at":"2026-01-05T02:21:51.365656-06:00","close_reason":"Implemented pause menu with mute toggle, auto-pause on focus loss"}
{"id":"GoPit-zxr","title":"EPIC: Phase 2 - Ball Evolution System","description":"# Phase 2: Ball Evolution System\n\n## Overview\nImplement the full ball status effect and fusion system inspired by BallxPit's 100+ ball evolutions.\n\n## Success Criteria\n- [ ] 6 base status effects implemented (Burn, Freeze, Poison, Bleed, Lightning, Iron)\n- [ ] Ball leveling system (L1 ‚Üí L2 ‚Üí L3)\n- [ ] Fusion Reactor drops spawn\n- [ ] At least 5 fusion combinations working\n- [ ] Evolution stones for single-ball evolutions\n\n## Reference\n- [Ball x Pit Tactics Guide](https://md-eksperiment.org/en/post/20251224-ball-x-pit-2025-pro-tactics-for-character-builds-boss-fights-and-efficient-bases)\n- [GDD.md Section 3.2](./GDD.md#32-ball-system)\n\n## Technical Context\nCurrent implementation:\n- ball.gd has BallType enum: NORMAL, FIRE, ICE, LIGHTNING\n- Fire/Ice/Lightning have basic effects\n- level_up_overlay.gd handles upgrades\n- No ball leveling or fusion system exists\n\n## Key Mechanics\nBall Fusion Formula:\n- Two L3 balls + Fusion Reactor = Evolved Ball\n- Example: Burn L3 + Iron L3 = Bomb Ball\n\nStatus Effect Details:\n- Burn: 5 dmg/sec for 3 sec\n- Freeze: 50% slow for 2 sec\n- Poison: 3 dmg/sec, spreads on death\n- Bleed: Stacking 2 dmg/sec, lifesteal synergy\n- Lightning: Chains to 2 nearby enemies\n- Iron: +50% damage, knockback\n\n## Child Tasks\n1. Status Effect System\n2. Ball Leveling (L1-L3)\n3. Fusion Reactor Drops\n4. Ball Fusion UI \u0026 Logic\n5. Evolution Stones\n\n## Dependencies\nDepends on Phase 1 completion (player must move to collect fusion reactors)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-05T23:19:24.999062-06:00","created_by":"randroid","updated_at":"2026-01-05T23:19:24.999062-06:00","dependencies":[{"issue_id":"GoPit-zxr","depends_on_id":"GoPit-ihf","type":"blocks","created_at":"2026-01-05T23:37:00.026637-06:00","created_by":"randroid"},{"issue_id":"GoPit-zxr","depends_on_id":"GoPit-x2u","type":"blocks","created_at":"2026-01-05T23:37:00.076153-06:00","created_by":"randroid"},{"issue_id":"GoPit-zxr","depends_on_id":"GoPit-lu2","type":"blocks","created_at":"2026-01-05T23:37:00.124509-06:00","created_by":"randroid"},{"issue_id":"GoPit-zxr","depends_on_id":"GoPit-3ky","type":"blocks","created_at":"2026-01-05T23:37:00.172663-06:00","created_by":"randroid"}]}
